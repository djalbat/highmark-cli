"use strict";
import { pathUtilities } from "necessary";
import { DOUBLE_DOTS } from "./constants";
import { migrateConfigurationFile, checkConfigurationFileExists } from "./configuration";
var bottommostNameFromPath = pathUtilities.bottommostNameFromPath;
export default function changeDirectory() {
    var directoryName = null, configurationFileExists = checkConfigurationFileExists();
    if (!configurationFileExists) {
        var currentWorkingDirectoryPath = process.cwd(); ///
        process.chdir(DOUBLE_DOTS);
        var oldCurrentWorkingDirectoryPath = currentWorkingDirectoryPath; ///
        configurationFileExists = checkConfigurationFileExists();
        if (configurationFileExists) {
            var bottommostOldCurrentWorkingDirectoryName = bottommostNameFromPath(oldCurrentWorkingDirectoryPath);
            directoryName = bottommostOldCurrentWorkingDirectoryName; ///
        } else {
            process.chdir(oldCurrentWorkingDirectoryPath);
        }
    }
    migrateConfigurationFile();
    return directoryName;
}

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL3NyYy9jaGFuZ2VEaXJlY3RvcnkuanMiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5cbmltcG9ydCB7IHBhdGhVdGlsaXRpZXMgfSBmcm9tIFwibmVjZXNzYXJ5XCI7XG5cbmltcG9ydCB7IERPVUJMRV9ET1RTIH0gZnJvbSBcIi4vY29uc3RhbnRzXCI7XG5pbXBvcnQgeyBtaWdyYXRlQ29uZmlndXJhdGlvbkZpbGUsIGNoZWNrQ29uZmlndXJhdGlvbkZpbGVFeGlzdHMgfSBmcm9tIFwiLi9jb25maWd1cmF0aW9uXCI7XG5cbmNvbnN0IHsgYm90dG9tbW9zdE5hbWVGcm9tUGF0aCB9ID0gcGF0aFV0aWxpdGllcztcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gY2hhbmdlRGlyZWN0b3J5KCkge1xuICBsZXQgZGlyZWN0b3J5TmFtZSA9IG51bGwsXG4gICAgICBjb25maWd1cmF0aW9uRmlsZUV4aXN0cyA9IGNoZWNrQ29uZmlndXJhdGlvbkZpbGVFeGlzdHMoKTtcblxuICBpZiAoIWNvbmZpZ3VyYXRpb25GaWxlRXhpc3RzKSB7XG4gICAgY29uc3QgY3VycmVudFdvcmtpbmdEaXJlY3RvcnlQYXRoID0gcHJvY2Vzcy5jd2QoKTsgLy8vXG5cbiAgICBwcm9jZXNzLmNoZGlyKERPVUJMRV9ET1RTKTtcblxuICAgIGNvbnN0IG9sZEN1cnJlbnRXb3JraW5nRGlyZWN0b3J5UGF0aCA9IGN1cnJlbnRXb3JraW5nRGlyZWN0b3J5UGF0aDsgLy8vXG5cbiAgICBjb25maWd1cmF0aW9uRmlsZUV4aXN0cyA9IGNoZWNrQ29uZmlndXJhdGlvbkZpbGVFeGlzdHMoKTtcblxuICAgIGlmIChjb25maWd1cmF0aW9uRmlsZUV4aXN0cykge1xuICAgICAgY29uc3QgYm90dG9tbW9zdE9sZEN1cnJlbnRXb3JraW5nRGlyZWN0b3J5TmFtZSA9IGJvdHRvbW1vc3ROYW1lRnJvbVBhdGgob2xkQ3VycmVudFdvcmtpbmdEaXJlY3RvcnlQYXRoKTtcblxuICAgICAgZGlyZWN0b3J5TmFtZSA9IGJvdHRvbW1vc3RPbGRDdXJyZW50V29ya2luZ0RpcmVjdG9yeU5hbWU7IC8vL1xuICAgIH0gZWxzZSB7XG4gICAgICBwcm9jZXNzLmNoZGlyKG9sZEN1cnJlbnRXb3JraW5nRGlyZWN0b3J5UGF0aCk7XG4gICAgfVxuICB9XG5cbiAgbWlncmF0ZUNvbmZpZ3VyYXRpb25GaWxlKCk7XG5cbiAgcmV0dXJuIGRpcmVjdG9yeU5hbWU7XG59XG4iXSwibmFtZXMiOlsicGF0aFV0aWxpdGllcyIsIkRPVUJMRV9ET1RTIiwibWlncmF0ZUNvbmZpZ3VyYXRpb25GaWxlIiwiY2hlY2tDb25maWd1cmF0aW9uRmlsZUV4aXN0cyIsImJvdHRvbW1vc3ROYW1lRnJvbVBhdGgiLCJjaGFuZ2VEaXJlY3RvcnkiLCJkaXJlY3RvcnlOYW1lIiwiY29uZmlndXJhdGlvbkZpbGVFeGlzdHMiLCJjdXJyZW50V29ya2luZ0RpcmVjdG9yeVBhdGgiLCJwcm9jZXNzIiwiY3dkIiwiY2hkaXIiLCJvbGRDdXJyZW50V29ya2luZ0RpcmVjdG9yeVBhdGgiLCJib3R0b21tb3N0T2xkQ3VycmVudFdvcmtpbmdEaXJlY3RvcnlOYW1lIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUVBLFNBQVNBLGFBQWEsUUFBUSxZQUFZO0FBRTFDLFNBQVNDLFdBQVcsUUFBUSxjQUFjO0FBQzFDLFNBQVNDLHdCQUF3QixFQUFFQyw0QkFBNEIsUUFBUSxrQkFBa0I7QUFFekYsSUFBTSxBQUFFQyx5QkFBMkJKLGNBQTNCSTtBQUVSLGVBQWUsU0FBU0M7SUFDdEIsSUFBSUMsZ0JBQWdCLE1BQ2hCQywwQkFBMEJKO0lBRTlCLElBQUksQ0FBQ0kseUJBQXlCO1FBQzVCLElBQU1DLDhCQUE4QkMsUUFBUUMsR0FBRyxJQUFJLEdBQUc7UUFFdERELFFBQVFFLEtBQUssQ0FBQ1Y7UUFFZCxJQUFNVyxpQ0FBaUNKLDZCQUE2QixHQUFHO1FBRXZFRCwwQkFBMEJKO1FBRTFCLElBQUlJLHlCQUF5QjtZQUMzQixJQUFNTSwyQ0FBMkNULHVCQUF1QlE7WUFFeEVOLGdCQUFnQk8sMENBQTBDLEdBQUc7UUFDL0QsT0FBTztZQUNMSixRQUFRRSxLQUFLLENBQUNDO1FBQ2hCO0lBQ0Y7SUFFQVY7SUFFQSxPQUFPSTtBQUNUIn0=