"use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
Object.defineProperty(exports, "default", {
    enumerable: true,
    get: function() {
        return createIndexHTMLOperation;
    }
});
var _highmarkmarkdown = require("highmark-markdown");
var _livelycli = require("lively-cli");
var _necessary = require("necessary");
var _index = /*#__PURE__*/ _interop_require_default(require("../html/index"));
var _client = /*#__PURE__*/ _interop_require_default(require("../html/client"));
var _loading = /*#__PURE__*/ _interop_require_default(require("../css/loading"));
var _loading1 = /*#__PURE__*/ _interop_require_default(require("../html/loading"));
var _document = /*#__PURE__*/ _interop_require_default(require("../css/document"));
var _fileSystem = require("../utilities/fileSystem");
var _constants = require("../constants");
function _interop_require_default(obj) {
    return obj && obj.__esModule ? obj : {
        default: obj
    };
}
var parseContent = _necessary.templateUtilities.parseContent, concatenatePaths = _necessary.pathUtilities.concatenatePaths;
function createIndexHTMLOperation(proceed, abort, context) {
    var client = context.client, highmarkCSS = context.highmarkCSS, highmarkHTML = context.highmarkHTML, projectDirectoryName = context.projectDirectoryName, fontCSS = _highmarkmarkdown.fontStyle, indexHTML = (0, _index.default)(client), clientHTML = (0, _client.default)(client), loadingHTML = (0, _loading1.default)(client), loadingCSS = (0, _loading.default)(client), documentCSS = (0, _document.default)(client), liveReloadHTML = _livelycli.liveReloadSnippet, args = {
        fontCSS: fontCSS,
        clientHTML: clientHTML,
        loadingCSS: loadingCSS,
        loadingHTML: loadingHTML,
        documentCSS: documentCSS,
        highmarkCSS: highmarkCSS,
        highmarkHTML: highmarkHTML,
        liveReloadHTML: liveReloadHTML
    };
    var content;
    content = indexHTML; ///
    var regularExpression = /{(.+?)}/g, parsedContent = parseContent(content, args, regularExpression);
    content = parsedContent; ///
    var filePath = concatenatePaths(projectDirectoryName, _constants.INDEX_HTML_FILE_NAME);
    (0, _fileSystem.writeFile)(filePath, content);
    proceed();
}

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9vcGVyYXRpb24vY3JlYXRlSW5kZXhIVE1MLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xuXG5pbXBvcnQgeyBmb250U3R5bGUgfSBmcm9tIFwiaGlnaG1hcmstbWFya2Rvd25cIjtcbmltcG9ydCB7IGxpdmVSZWxvYWRTbmlwcGV0IH0gZnJvbSBcImxpdmVseS1jbGlcIjtcbmltcG9ydCB7IHBhdGhVdGlsaXRpZXMsIHRlbXBsYXRlVXRpbGl0aWVzIH0gZnJvbSBcIm5lY2Vzc2FyeVwiO1xuXG5pbXBvcnQgY3JlYXRlSW5kZXhIVE1MIGZyb20gXCIuLi9odG1sL2luZGV4XCI7XG5pbXBvcnQgY3JlYXRlQ2xpZW50SFRNTCBmcm9tIFwiLi4vaHRtbC9jbGllbnRcIjtcbmltcG9ydCBjcmVhdGVMb2FkaW5nQ1NTIGZyb20gXCIuLi9jc3MvbG9hZGluZ1wiO1xuaW1wb3J0IGNyZWF0ZUxvYWRpbmdIVE1MIGZyb20gXCIuLi9odG1sL2xvYWRpbmdcIjtcbmltcG9ydCBjcmVhdGVEb2N1bWVudENTUyBmcm9tIFwiLi4vY3NzL2RvY3VtZW50XCI7XG5cbmltcG9ydCB7IHdyaXRlRmlsZSB9IGZyb20gXCIuLi91dGlsaXRpZXMvZmlsZVN5c3RlbVwiO1xuaW1wb3J0IHsgSU5ERVhfSFRNTF9GSUxFX05BTUUgfSBmcm9tIFwiLi4vY29uc3RhbnRzXCI7XG5cbmNvbnN0IHsgcGFyc2VDb250ZW50IH0gPSB0ZW1wbGF0ZVV0aWxpdGllcyxcbiAgICAgIHsgY29uY2F0ZW5hdGVQYXRocyB9ID0gcGF0aFV0aWxpdGllcztcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gY3JlYXRlSW5kZXhIVE1MT3BlcmF0aW9uKHByb2NlZWQsIGFib3J0LCBjb250ZXh0KSB7XG4gIGNvbnN0IHsgY2xpZW50LCBoaWdobWFya0NTUywgaGlnaG1hcmtIVE1MLCBwcm9qZWN0RGlyZWN0b3J5TmFtZSB9ID0gY29udGV4dCxcbiAgICAgICAgZm9udENTUyA9IGZvbnRTdHlsZSwgIC8vL1xuICAgICAgICBpbmRleEhUTUwgPSBjcmVhdGVJbmRleEhUTUwoY2xpZW50KSxcbiAgICAgICAgY2xpZW50SFRNTCA9IGNyZWF0ZUNsaWVudEhUTUwoY2xpZW50KSxcbiAgICAgICAgbG9hZGluZ0hUTUwgPSBjcmVhdGVMb2FkaW5nSFRNTChjbGllbnQpLFxuICAgICAgICBsb2FkaW5nQ1NTID0gY3JlYXRlTG9hZGluZ0NTUyhjbGllbnQpLFxuICAgICAgICBkb2N1bWVudENTUyA9IGNyZWF0ZURvY3VtZW50Q1NTKGNsaWVudCksXG4gICAgICAgIGxpdmVSZWxvYWRIVE1MID0gbGl2ZVJlbG9hZFNuaXBwZXQsIC8vL1xuICAgICAgICBhcmdzID0ge1xuICAgICAgICAgIGZvbnRDU1MsXG4gICAgICAgICAgY2xpZW50SFRNTCxcbiAgICAgICAgICBsb2FkaW5nQ1NTLFxuICAgICAgICAgIGxvYWRpbmdIVE1MLFxuICAgICAgICAgIGRvY3VtZW50Q1NTLFxuICAgICAgICAgIGhpZ2htYXJrQ1NTLFxuICAgICAgICAgIGhpZ2htYXJrSFRNTCxcbiAgICAgICAgICBsaXZlUmVsb2FkSFRNTFxuICAgICAgICB9O1xuXG4gIGxldCBjb250ZW50O1xuXG4gIGNvbnRlbnQgPSBpbmRleEhUTUw7ICAvLy9cblxuICBjb25zdCByZWd1bGFyRXhwcmVzc2lvbiA9IC97KC4rPyl9L2csXG4gICAgICAgIHBhcnNlZENvbnRlbnQgPSBwYXJzZUNvbnRlbnQoY29udGVudCwgYXJncywgcmVndWxhckV4cHJlc3Npb24pO1xuXG4gIGNvbnRlbnQgPSBwYXJzZWRDb250ZW50OyAgLy8vXG5cbiAgY29uc3QgZmlsZVBhdGggPSBjb25jYXRlbmF0ZVBhdGhzKHByb2plY3REaXJlY3RvcnlOYW1lLCBJTkRFWF9IVE1MX0ZJTEVfTkFNRSk7XG5cbiAgd3JpdGVGaWxlKGZpbGVQYXRoLCBjb250ZW50KTtcblxuICBwcm9jZWVkKCk7XG59XG4iXSwibmFtZXMiOlsiY3JlYXRlSW5kZXhIVE1MT3BlcmF0aW9uIiwicGFyc2VDb250ZW50IiwidGVtcGxhdGVVdGlsaXRpZXMiLCJjb25jYXRlbmF0ZVBhdGhzIiwicGF0aFV0aWxpdGllcyIsInByb2NlZWQiLCJhYm9ydCIsImNvbnRleHQiLCJjbGllbnQiLCJoaWdobWFya0NTUyIsImhpZ2htYXJrSFRNTCIsInByb2plY3REaXJlY3RvcnlOYW1lIiwiZm9udENTUyIsImZvbnRTdHlsZSIsImluZGV4SFRNTCIsImNyZWF0ZUluZGV4SFRNTCIsImNsaWVudEhUTUwiLCJjcmVhdGVDbGllbnRIVE1MIiwibG9hZGluZ0hUTUwiLCJjcmVhdGVMb2FkaW5nSFRNTCIsImxvYWRpbmdDU1MiLCJjcmVhdGVMb2FkaW5nQ1NTIiwiZG9jdW1lbnRDU1MiLCJjcmVhdGVEb2N1bWVudENTUyIsImxpdmVSZWxvYWRIVE1MIiwibGl2ZVJlbG9hZFNuaXBwZXQiLCJhcmdzIiwiY29udGVudCIsInJlZ3VsYXJFeHByZXNzaW9uIiwicGFyc2VkQ29udGVudCIsImZpbGVQYXRoIiwiSU5ERVhfSFRNTF9GSUxFX05BTUUiLCJ3cml0ZUZpbGUiXSwibWFwcGluZ3MiOiJBQUFBOzs7OytCQWtCQTs7O2VBQXdCQTs7O2dDQWhCRTt5QkFDUTt5QkFDZTs0REFFckI7NkRBQ0M7OERBQ0E7K0RBQ0M7K0RBQ0E7MEJBRUo7eUJBQ1c7Ozs7OztBQUVyQyxJQUFNLEFBQUVDLGVBQWlCQyw0QkFBaUIsQ0FBbENELGNBQ0YsQUFBRUUsbUJBQXFCQyx3QkFBYSxDQUFsQ0Q7QUFFTyxTQUFTSCx5QkFBeUJLLE9BQU8sRUFBRUMsS0FBSyxFQUFFQyxPQUFPO0lBQ3RFLElBQVFDLFNBQTRERCxRQUE1REMsUUFBUUMsY0FBb0RGLFFBQXBERSxhQUFhQyxlQUF1Q0gsUUFBdkNHLGNBQWNDLHVCQUF5QkosUUFBekJJLHNCQUNyQ0MsVUFBVUMsMkJBQVMsRUFDbkJDLFlBQVlDLElBQUFBLGNBQWUsRUFBQ1AsU0FDNUJRLGFBQWFDLElBQUFBLGVBQWdCLEVBQUNULFNBQzlCVSxjQUFjQyxJQUFBQSxpQkFBaUIsRUFBQ1gsU0FDaENZLGFBQWFDLElBQUFBLGdCQUFnQixFQUFDYixTQUM5QmMsY0FBY0MsSUFBQUEsaUJBQWlCLEVBQUNmLFNBQ2hDZ0IsaUJBQWlCQyw0QkFBaUIsRUFDbENDLE9BQU87UUFDTGQsU0FBQUE7UUFDQUksWUFBQUE7UUFDQUksWUFBQUE7UUFDQUYsYUFBQUE7UUFDQUksYUFBQUE7UUFDQWIsYUFBQUE7UUFDQUMsY0FBQUE7UUFDQWMsZ0JBQUFBO0lBQ0Y7SUFFTixJQUFJRztJQUVKQSxVQUFVYixXQUFZLEdBQUc7SUFFekIsSUFBTWMsb0JBQW9CLFlBQ3BCQyxnQkFBZ0I1QixhQUFhMEIsU0FBU0QsTUFBTUU7SUFFbERELFVBQVVFLGVBQWdCLEdBQUc7SUFFN0IsSUFBTUMsV0FBVzNCLGlCQUFpQlEsc0JBQXNCb0IsK0JBQW9CO0lBRTVFQyxJQUFBQSxxQkFBUyxFQUFDRixVQUFVSDtJQUVwQnRCO0FBQ0YifQ==