"use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
Object.defineProperty(exports, "default", {
    enumerable: true,
    get: function() {
        return _default;
    }
});
var _easy = require("easy");
var _position = /*#__PURE__*/ _interop_require_default(require("../position"));
var _velocity = /*#__PURE__*/ _interop_require_default(require("../velocity"));
var _constants = require("../constants");
var _customEventTypes = require("../customEventTypes");
function _interop_require_default(obj) {
    return obj && obj.__esModule ? obj : {
        default: obj
    };
}
function enableTouch() {
    var startPosition = null;
    this.updateState({
        startPosition: startPosition
    });
    this.onMouseDown(this.mouseDownHandler);
    this.onMouseMove(this.mouseMoveHandler);
    _easy.window.onMouseUp(this.mouseUpHandler, this);
    this.onTouchStart(this.touchStartHandler);
    this.onTouchMove(this.touchMoveHandler);
    this.onTouchEnd(this.touchEndHandler);
}
function disableTouch() {
    this.offMouseDown(this.mouseDownHandler);
    this.offMouseMove(this.mouseMoveHandler);
    _easy.window.offMouseUp(this.mouseUpHandler, this);
    this.offTouchStart(this.touchStartHandler);
    this.offTouchMove(this.touchMoveHandler);
    this.offTouchEnd(this.touchEndHandler);
}
function onCustomTap(tapCustomHandler, element) {
    var customEventType = _customEventTypes.TAP_CUSTOM_EVENT_TYPE, customHandler = tapCustomHandler; ///
    this.onCustomEvent(customEventType, customHandler, element);
}
function offCustomTap(tapCustomHandler, element) {
    var customEventType = _customEventTypes.TAP_CUSTOM_EVENT_TYPE, customHandler = tapCustomHandler; ///
    this.offCustomEvent(customEventType, customHandler, element);
}
function onCustomSwipeUp(swipeUpCustomHandler, element) {
    var customEventType = _customEventTypes.SWIPE_UP_CUSTOM_EVENT_TYPE, customHandler = swipeUpCustomHandler; ///
    this.onCustomEvent(customEventType, customHandler, element);
}
function offCustomSwipeUp(swipeUpCustomHandler, element) {
    var customEventType = _customEventTypes.SWIPE_UP_CUSTOM_EVENT_TYPE, customHandler = swipeUpCustomHandler; ///
    this.offCustomEvent(customEventType, customHandler, element);
}
function onCustomSwipeDown(swipeDownCustomHandler, element) {
    var customEventType = _customEventTypes.SWIPE_DOWN_CUSTOM_EVENT_TYPE, customHandler = swipeDownCustomHandler; ///
    this.onCustomEvent(customEventType, customHandler, element);
}
function offCustomSwipeDown(swipeDownCustomHandler, element) {
    var customEventType = _customEventTypes.SWIPE_DOWN_CUSTOM_EVENT_TYPE, customHandler = swipeDownCustomHandler; ///
    this.offCustomEvent(customEventType, customHandler, element);
}
function onCustomSwipeLeft(swipeLeftCustomHandler, element) {
    var customEventType = _customEventTypes.SWIPE_LEFT_CUSTOM_EVENT_TYPE, customHandler = swipeLeftCustomHandler; ///
    this.onCustomEvent(customEventType, customHandler, element);
}
function offCustomSwipeLeft(swipeLeftCustomHandler, element) {
    var customEventType = _customEventTypes.SWIPE_LEFT_CUSTOM_EVENT_TYPE, customHandler = swipeLeftCustomHandler; ///
    this.offCustomEvent(customEventType, customHandler, element);
}
function onCustomSwipeRight(swipeRightCustomHandler, element) {
    var customEventType = _customEventTypes.SWIPE_RIGHT_CUSTOM_EVENT_TYPE, customHandler = swipeRightCustomHandler; ///
    this.onCustomEvent(customEventType, customHandler, element);
}
function offCustomSwipeRight(swipeRightCustomHandler, element) {
    var customEventType = _customEventTypes.SWIPE_RIGHT_CUSTOM_EVENT_TYPE, customHandler = swipeRightCustomHandler; ///
    this.offCustomEvent(customEventType, customHandler, element);
}
function getStartPosition() {
    var startPosition = this.getState().startPosition;
    return startPosition;
}
function setStartPosition(startPosition) {
    this.updateState({
        startPosition: startPosition
    });
}
function touchStartHandler(event, element) {
    this.startHandler(event, element, function(event) {
        var touchEvent = event, position = _position.default.fromTouchEvent(touchEvent);
        return position;
    });
}
function mouseDownHandler(event, element) {
    this.startHandler(event, element, function(event) {
        var mouseEvent = event, position = _position.default.fromMouseEvent(mouseEvent);
        return position;
    });
}
function touchMoveHandler(event, element) {
    this.moveHandler(event, element, function(event) {
        var touchEvent = event, position = _position.default.fromTouchEvent(touchEvent);
        return position;
    });
}
function mouseMoveHandler(event, element) {
    this.moveHandler(event, element, function(event) {
        var mouseEvent = event, position = _position.default.fromMouseEvent(mouseEvent);
        return position;
    });
}
function touchEndHandler(event, element) {
    this.endHandler(event, element, function(event) {
        var touchEvent = event, position = _position.default.fromTouchEvent(touchEvent);
        return position;
    });
}
function mouseUpHandler(event, element) {
    this.endHandler(event, element, function(event) {
        var mouseEvent = event, position = _position.default.fromMouseEvent(mouseEvent);
        return position;
    });
}
function startHandler(event, element, positionFromEvent) {
    var position = positionFromEvent(event), startPosition = position; ///
    this.setStartPosition(startPosition);
}
function moveHandler(event, element, positionFromEvent) {
    var startPosition = this.getStartPosition();
    if (startPosition !== null) {
        var position = positionFromEvent(event);
        if (position !== null) {
            var positionMatchesStartPosition = position.match(startPosition);
            if (positionMatchesStartPosition) {
                var velocity = _velocity.default.fromPositionAndStartPosition(position, startPosition), direction = velocity.getDirection(), speed = velocity.getSpeed();
                var customEventType = null, projectedVelocity;
                if (Math.abs(direction) < _constants.MAXIMUM_SWIPE_RANGE) {
                    customEventType = _customEventTypes.SWIPE_RIGHT_CUSTOM_EVENT_TYPE;
                    projectedVelocity = speed * Math.cos(direction);
                }
                if (Math.abs(_constants.PI_OVER_TWO - direction) < _constants.MAXIMUM_SWIPE_RANGE) {
                    customEventType = _customEventTypes.SWIPE_UP_CUSTOM_EVENT_TYPE;
                    projectedVelocity = speed * Math.sin(direction);
                }
                if (Math.abs(-_constants.PI_OVER_TWO - direction) < _constants.MAXIMUM_SWIPE_RANGE) {
                    customEventType = _customEventTypes.SWIPE_DOWN_CUSTOM_EVENT_TYPE;
                    projectedVelocity = speed * Math.sin(direction);
                }
                if (_constants.PI - Math.abs(direction) < _constants.MAXIMUM_SWIPE_RANGE) {
                    customEventType = _customEventTypes.SWIPE_LEFT_CUSTOM_EVENT_TYPE;
                    projectedVelocity = speed * Math.cos(direction);
                }
                if (customEventType !== null) {
                    this.callCustomHandlers(customEventType, event, element, projectedVelocity);
                }
            }
        }
    }
}
function endHandler(event, element, positionFromEvent) {
    var startPosition;
    startPosition = this.getStartPosition();
    if (startPosition !== null) {
        var position = positionFromEvent(event);
        if (position !== null) {
            var positionMatchesStartPosition = position.match(startPosition);
            if (positionMatchesStartPosition) {
                var velocity = _velocity.default.fromPositionAndStartPosition(position, startPosition), direction = velocity.getDirection(), speed = velocity.getSpeed(), time = velocity.getTime();
                var customEventType = null, projectedVelocity;
                if (speed === 0) {
                    if (time < _constants.MAXIMUM_TAP_TIME) {
                        customEventType = _customEventTypes.TAP_CUSTOM_EVENT_TYPE;
                        projectedVelocity = speed; ///
                    }
                } else if (speed > _constants.MINIMUM_SWIPE_SPEED) {
                    if (Math.abs(direction) < _constants.MAXIMUM_SWIPE_RANGE) {
                        customEventType = _customEventTypes.SWIPE_RIGHT_CUSTOM_EVENT_TYPE;
                        projectedVelocity = speed * Math.cos(direction);
                    }
                    if (Math.abs(_constants.PI_OVER_TWO - direction) < _constants.MAXIMUM_SWIPE_RANGE) {
                        customEventType = _customEventTypes.SWIPE_UP_CUSTOM_EVENT_TYPE;
                        projectedVelocity = speed * Math.sin(direction);
                    }
                    if (Math.abs(-_constants.PI_OVER_TWO - direction) < _constants.MAXIMUM_SWIPE_RANGE) {
                        customEventType = _customEventTypes.SWIPE_DOWN_CUSTOM_EVENT_TYPE;
                        projectedVelocity = speed * Math.sin(direction);
                    }
                    if (_constants.PI - Math.abs(direction) < _constants.MAXIMUM_SWIPE_RANGE) {
                        customEventType = _customEventTypes.SWIPE_LEFT_CUSTOM_EVENT_TYPE;
                        projectedVelocity = speed * Math.cos(direction);
                    }
                }
                if (customEventType !== null) {
                    this.callCustomHandlers(customEventType, event, element, projectedVelocity);
                }
            }
        }
    }
    startPosition = null;
    this.setStartPosition(startPosition);
}
var customEventMixins = {
    enableTouch: enableTouch,
    disableTouch: disableTouch,
    onCustomTap: onCustomTap,
    offCustomTap: offCustomTap,
    onCustomSwipeUp: onCustomSwipeUp,
    offCustomSwipeUp: offCustomSwipeUp,
    onCustomSwipeDown: onCustomSwipeDown,
    offCustomSwipeDown: offCustomSwipeDown,
    onCustomSwipeLeft: onCustomSwipeLeft,
    offCustomSwipeLeft: offCustomSwipeLeft,
    onCustomSwipeRight: onCustomSwipeRight,
    offCustomSwipeRight: offCustomSwipeRight,
    getStartPosition: getStartPosition,
    setStartPosition: setStartPosition,
    touchStartHandler: touchStartHandler,
    mouseDownHandler: mouseDownHandler,
    touchMoveHandler: touchMoveHandler,
    mouseMoveHandler: mouseMoveHandler,
    touchEndHandler: touchEndHandler,
    mouseUpHandler: mouseUpHandler,
    startHandler: startHandler,
    moveHandler: moveHandler,
    endHandler: endHandler
};
var _default = customEventMixins;

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9taXhpbnMvdG91Y2guanMiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5cbmltcG9ydCB7IHdpbmRvdyB9IGZyb20gXCJlYXN5XCI7XG5cbmltcG9ydCBQb3NpdGlvbiBmcm9tIFwiLi4vcG9zaXRpb25cIjtcbmltcG9ydCBWZWxvY2l0eSBmcm9tIFwiLi4vdmVsb2NpdHlcIjtcblxuaW1wb3J0IHsgUEksIFBJX09WRVJfVFdPLCBNQVhJTVVNX1RBUF9USU1FLCBNSU5JTVVNX1NXSVBFX1NQRUVELCBNQVhJTVVNX1NXSVBFX1JBTkdFIH0gZnJvbSBcIi4uL2NvbnN0YW50c1wiO1xuaW1wb3J0IHsgVEFQX0NVU1RPTV9FVkVOVF9UWVBFLFxuICAgICAgICAgU1dJUEVfVVBfQ1VTVE9NX0VWRU5UX1RZUEUsXG4gICAgICAgICBTV0lQRV9ET1dOX0NVU1RPTV9FVkVOVF9UWVBFLFxuICAgICAgICAgU1dJUEVfTEVGVF9DVVNUT01fRVZFTlRfVFlQRSxcbiAgICAgICAgIFNXSVBFX1JJR0hUX0NVU1RPTV9FVkVOVF9UWVBFIH0gZnJvbSBcIi4uL2N1c3RvbUV2ZW50VHlwZXNcIjtcblxuZnVuY3Rpb24gZW5hYmxlVG91Y2goKSB7XG4gIGNvbnN0IHN0YXJ0UG9zaXRpb24gPSBudWxsO1xuXG4gIHRoaXMudXBkYXRlU3RhdGUoe1xuICAgIHN0YXJ0UG9zaXRpb25cbiAgfSk7XG5cbiAgdGhpcy5vbk1vdXNlRG93bih0aGlzLm1vdXNlRG93bkhhbmRsZXIpO1xuICB0aGlzLm9uTW91c2VNb3ZlKHRoaXMubW91c2VNb3ZlSGFuZGxlcik7XG5cbiAgd2luZG93Lm9uTW91c2VVcCh0aGlzLm1vdXNlVXBIYW5kbGVyLCB0aGlzKTtcblxuICB0aGlzLm9uVG91Y2hTdGFydCh0aGlzLnRvdWNoU3RhcnRIYW5kbGVyKTtcbiAgdGhpcy5vblRvdWNoTW92ZSh0aGlzLnRvdWNoTW92ZUhhbmRsZXIpO1xuICB0aGlzLm9uVG91Y2hFbmQodGhpcy50b3VjaEVuZEhhbmRsZXIpO1xufVxuXG5mdW5jdGlvbiBkaXNhYmxlVG91Y2goKSB7XG4gIHRoaXMub2ZmTW91c2VEb3duKHRoaXMubW91c2VEb3duSGFuZGxlcik7XG4gIHRoaXMub2ZmTW91c2VNb3ZlKHRoaXMubW91c2VNb3ZlSGFuZGxlcik7XG5cbiAgd2luZG93Lm9mZk1vdXNlVXAodGhpcy5tb3VzZVVwSGFuZGxlciwgdGhpcyk7XG5cbiAgdGhpcy5vZmZUb3VjaFN0YXJ0KHRoaXMudG91Y2hTdGFydEhhbmRsZXIpO1xuICB0aGlzLm9mZlRvdWNoTW92ZSh0aGlzLnRvdWNoTW92ZUhhbmRsZXIpO1xuICB0aGlzLm9mZlRvdWNoRW5kKHRoaXMudG91Y2hFbmRIYW5kbGVyKTtcbn1cblxuZnVuY3Rpb24gb25DdXN0b21UYXAodGFwQ3VzdG9tSGFuZGxlciwgZWxlbWVudCkge1xuICBjb25zdCBjdXN0b21FdmVudFR5cGUgPSBUQVBfQ1VTVE9NX0VWRU5UX1RZUEUsXG4gICAgICAgIGN1c3RvbUhhbmRsZXIgPSB0YXBDdXN0b21IYW5kbGVyOyAvLy9cblxuICB0aGlzLm9uQ3VzdG9tRXZlbnQoY3VzdG9tRXZlbnRUeXBlLCBjdXN0b21IYW5kbGVyLCBlbGVtZW50KTtcbn1cblxuZnVuY3Rpb24gb2ZmQ3VzdG9tVGFwKHRhcEN1c3RvbUhhbmRsZXIsIGVsZW1lbnQpIHtcbiAgY29uc3QgY3VzdG9tRXZlbnRUeXBlID0gVEFQX0NVU1RPTV9FVkVOVF9UWVBFLFxuICAgICAgICBjdXN0b21IYW5kbGVyID0gdGFwQ3VzdG9tSGFuZGxlcjsgLy8vXG5cbiAgdGhpcy5vZmZDdXN0b21FdmVudChjdXN0b21FdmVudFR5cGUsIGN1c3RvbUhhbmRsZXIsIGVsZW1lbnQpO1xufVxuXG5mdW5jdGlvbiBvbkN1c3RvbVN3aXBlVXAoc3dpcGVVcEN1c3RvbUhhbmRsZXIsIGVsZW1lbnQpIHtcbiAgY29uc3QgY3VzdG9tRXZlbnRUeXBlID0gU1dJUEVfVVBfQ1VTVE9NX0VWRU5UX1RZUEUsXG4gICAgICAgIGN1c3RvbUhhbmRsZXIgPSBzd2lwZVVwQ3VzdG9tSGFuZGxlcjsgLy8vXG5cbiAgdGhpcy5vbkN1c3RvbUV2ZW50KGN1c3RvbUV2ZW50VHlwZSwgY3VzdG9tSGFuZGxlciwgZWxlbWVudCk7XG59XG5cbmZ1bmN0aW9uIG9mZkN1c3RvbVN3aXBlVXAoc3dpcGVVcEN1c3RvbUhhbmRsZXIsIGVsZW1lbnQpIHtcbiAgY29uc3QgY3VzdG9tRXZlbnRUeXBlID0gU1dJUEVfVVBfQ1VTVE9NX0VWRU5UX1RZUEUsXG4gICAgICAgIGN1c3RvbUhhbmRsZXIgPSBzd2lwZVVwQ3VzdG9tSGFuZGxlcjsgLy8vXG5cbiAgdGhpcy5vZmZDdXN0b21FdmVudChjdXN0b21FdmVudFR5cGUsIGN1c3RvbUhhbmRsZXIsIGVsZW1lbnQpO1xufVxuXG5mdW5jdGlvbiBvbkN1c3RvbVN3aXBlRG93bihzd2lwZURvd25DdXN0b21IYW5kbGVyLCBlbGVtZW50KSB7XG4gIGNvbnN0IGN1c3RvbUV2ZW50VHlwZSA9IFNXSVBFX0RPV05fQ1VTVE9NX0VWRU5UX1RZUEUsXG4gICAgICAgIGN1c3RvbUhhbmRsZXIgPSBzd2lwZURvd25DdXN0b21IYW5kbGVyOyAvLy9cblxuICB0aGlzLm9uQ3VzdG9tRXZlbnQoY3VzdG9tRXZlbnRUeXBlLCBjdXN0b21IYW5kbGVyLCBlbGVtZW50KTtcbn1cblxuZnVuY3Rpb24gb2ZmQ3VzdG9tU3dpcGVEb3duKHN3aXBlRG93bkN1c3RvbUhhbmRsZXIsIGVsZW1lbnQpIHtcbiAgY29uc3QgY3VzdG9tRXZlbnRUeXBlID0gU1dJUEVfRE9XTl9DVVNUT01fRVZFTlRfVFlQRSxcbiAgICAgICAgY3VzdG9tSGFuZGxlciA9IHN3aXBlRG93bkN1c3RvbUhhbmRsZXI7IC8vL1xuXG4gIHRoaXMub2ZmQ3VzdG9tRXZlbnQoY3VzdG9tRXZlbnRUeXBlLCBjdXN0b21IYW5kbGVyLCBlbGVtZW50KTtcbn1cblxuZnVuY3Rpb24gb25DdXN0b21Td2lwZUxlZnQoc3dpcGVMZWZ0Q3VzdG9tSGFuZGxlciwgZWxlbWVudCkge1xuICBjb25zdCBjdXN0b21FdmVudFR5cGUgPSBTV0lQRV9MRUZUX0NVU1RPTV9FVkVOVF9UWVBFLFxuICAgICAgICBjdXN0b21IYW5kbGVyID0gc3dpcGVMZWZ0Q3VzdG9tSGFuZGxlcjsgLy8vXG5cbiAgdGhpcy5vbkN1c3RvbUV2ZW50KGN1c3RvbUV2ZW50VHlwZSwgY3VzdG9tSGFuZGxlciwgZWxlbWVudCk7XG59XG5cbmZ1bmN0aW9uIG9mZkN1c3RvbVN3aXBlTGVmdChzd2lwZUxlZnRDdXN0b21IYW5kbGVyLCBlbGVtZW50KSB7XG4gIGNvbnN0IGN1c3RvbUV2ZW50VHlwZSA9IFNXSVBFX0xFRlRfQ1VTVE9NX0VWRU5UX1RZUEUsXG4gICAgICAgIGN1c3RvbUhhbmRsZXIgPSBzd2lwZUxlZnRDdXN0b21IYW5kbGVyOyAvLy9cblxuICB0aGlzLm9mZkN1c3RvbUV2ZW50KGN1c3RvbUV2ZW50VHlwZSwgY3VzdG9tSGFuZGxlciwgZWxlbWVudCk7XG59XG5cbmZ1bmN0aW9uIG9uQ3VzdG9tU3dpcGVSaWdodChzd2lwZVJpZ2h0Q3VzdG9tSGFuZGxlciwgZWxlbWVudCkge1xuICBjb25zdCBjdXN0b21FdmVudFR5cGUgPSBTV0lQRV9SSUdIVF9DVVNUT01fRVZFTlRfVFlQRSxcbiAgICAgICAgY3VzdG9tSGFuZGxlciA9IHN3aXBlUmlnaHRDdXN0b21IYW5kbGVyOyAvLy9cblxuICB0aGlzLm9uQ3VzdG9tRXZlbnQoY3VzdG9tRXZlbnRUeXBlLCBjdXN0b21IYW5kbGVyLCBlbGVtZW50KTtcbn1cblxuZnVuY3Rpb24gb2ZmQ3VzdG9tU3dpcGVSaWdodChzd2lwZVJpZ2h0Q3VzdG9tSGFuZGxlciwgZWxlbWVudCkge1xuICBjb25zdCBjdXN0b21FdmVudFR5cGUgPSBTV0lQRV9SSUdIVF9DVVNUT01fRVZFTlRfVFlQRSxcbiAgICAgICAgY3VzdG9tSGFuZGxlciA9IHN3aXBlUmlnaHRDdXN0b21IYW5kbGVyOyAvLy9cblxuICB0aGlzLm9mZkN1c3RvbUV2ZW50KGN1c3RvbUV2ZW50VHlwZSwgY3VzdG9tSGFuZGxlciwgZWxlbWVudCk7XG59XG5cbmZ1bmN0aW9uIGdldFN0YXJ0UG9zaXRpb24oKSB7XG4gIGNvbnN0IHsgc3RhcnRQb3NpdGlvbiB9ID0gdGhpcy5nZXRTdGF0ZSgpO1xuXG4gIHJldHVybiBzdGFydFBvc2l0aW9uO1xufVxuXG5mdW5jdGlvbiBzZXRTdGFydFBvc2l0aW9uKHN0YXJ0UG9zaXRpb24pIHtcbiAgdGhpcy51cGRhdGVTdGF0ZSh7XG4gICAgc3RhcnRQb3NpdGlvblxuICB9KTtcbn1cblxuZnVuY3Rpb24gdG91Y2hTdGFydEhhbmRsZXIoZXZlbnQsIGVsZW1lbnQpIHtcbiAgdGhpcy5zdGFydEhhbmRsZXIoZXZlbnQsIGVsZW1lbnQsIChldmVudCkgPT4ge1xuICAgIGNvbnN0IHRvdWNoRXZlbnQgPSBldmVudCwgLy8vXG4gICAgICAgICAgcG9zaXRpb24gPSBQb3NpdGlvbi5mcm9tVG91Y2hFdmVudCh0b3VjaEV2ZW50KTtcblxuICAgIHJldHVybiBwb3NpdGlvbjtcbiAgfSk7XG59XG5cbmZ1bmN0aW9uIG1vdXNlRG93bkhhbmRsZXIoZXZlbnQsIGVsZW1lbnQpIHtcbiAgdGhpcy5zdGFydEhhbmRsZXIoZXZlbnQsIGVsZW1lbnQsIChldmVudCkgPT4geyAgLy8vXG4gICAgY29uc3QgbW91c2VFdmVudCA9IGV2ZW50LCAvLy9cbiAgICAgICAgICBwb3NpdGlvbiA9IFBvc2l0aW9uLmZyb21Nb3VzZUV2ZW50KG1vdXNlRXZlbnQpO1xuXG4gICAgcmV0dXJuIHBvc2l0aW9uO1xuICB9KTtcbn1cblxuZnVuY3Rpb24gdG91Y2hNb3ZlSGFuZGxlcihldmVudCwgZWxlbWVudCkge1xuICB0aGlzLm1vdmVIYW5kbGVyKGV2ZW50LCBlbGVtZW50LCAoZXZlbnQpID0+IHtcbiAgICBjb25zdCB0b3VjaEV2ZW50ID0gZXZlbnQsIC8vL1xuICAgICAgICAgIHBvc2l0aW9uID0gUG9zaXRpb24uZnJvbVRvdWNoRXZlbnQodG91Y2hFdmVudCk7XG5cbiAgICByZXR1cm4gcG9zaXRpb247XG4gIH0pO1xufVxuXG5mdW5jdGlvbiBtb3VzZU1vdmVIYW5kbGVyKGV2ZW50LCBlbGVtZW50KSB7XG4gIHRoaXMubW92ZUhhbmRsZXIoZXZlbnQsIGVsZW1lbnQsIChldmVudCkgPT4ge1xuICAgIGNvbnN0IG1vdXNlRXZlbnQgPSBldmVudCwgLy8vXG4gICAgICAgICAgcG9zaXRpb24gPSBQb3NpdGlvbi5mcm9tTW91c2VFdmVudChtb3VzZUV2ZW50KTtcblxuICAgIHJldHVybiBwb3NpdGlvbjtcbiAgfSk7XG59XG5cbmZ1bmN0aW9uIHRvdWNoRW5kSGFuZGxlcihldmVudCwgZWxlbWVudCkge1xuICB0aGlzLmVuZEhhbmRsZXIoZXZlbnQsIGVsZW1lbnQsIChldmVudCkgPT4ge1xuICAgIGNvbnN0IHRvdWNoRXZlbnQgPSBldmVudCwgLy8vXG4gICAgICAgICAgcG9zaXRpb24gPSBQb3NpdGlvbi5mcm9tVG91Y2hFdmVudCh0b3VjaEV2ZW50KTtcblxuICAgIHJldHVybiBwb3NpdGlvbjtcbiAgfSk7XG59XG5cbmZ1bmN0aW9uIG1vdXNlVXBIYW5kbGVyKGV2ZW50LCBlbGVtZW50KSB7XG4gIHRoaXMuZW5kSGFuZGxlcihldmVudCwgZWxlbWVudCwgKGV2ZW50KSA9PiB7ICAvLy9cbiAgICBjb25zdCBtb3VzZUV2ZW50ID0gZXZlbnQsIC8vL1xuICAgICAgICAgIHBvc2l0aW9uID0gUG9zaXRpb24uZnJvbU1vdXNlRXZlbnQobW91c2VFdmVudCk7XG5cbiAgICByZXR1cm4gcG9zaXRpb247XG4gIH0pO1xufVxuXG5mdW5jdGlvbiBzdGFydEhhbmRsZXIoZXZlbnQsIGVsZW1lbnQsIHBvc2l0aW9uRnJvbUV2ZW50KSB7XG4gIGNvbnN0IHBvc2l0aW9uID0gcG9zaXRpb25Gcm9tRXZlbnQoZXZlbnQpLFxuICAgICAgICBzdGFydFBvc2l0aW9uID0gcG9zaXRpb247ICAvLy9cblxuICB0aGlzLnNldFN0YXJ0UG9zaXRpb24oc3RhcnRQb3NpdGlvbik7XG59XG5cbmZ1bmN0aW9uIG1vdmVIYW5kbGVyKGV2ZW50LCBlbGVtZW50LCBwb3NpdGlvbkZyb21FdmVudCkge1xuICBsZXQgc3RhcnRQb3NpdGlvbiA9IHRoaXMuZ2V0U3RhcnRQb3NpdGlvbigpO1xuXG4gIGlmIChzdGFydFBvc2l0aW9uICE9PSBudWxsKSB7XG4gICAgY29uc3QgcG9zaXRpb24gPSBwb3NpdGlvbkZyb21FdmVudChldmVudCk7XG5cbiAgICBpZiAocG9zaXRpb24gIT09IG51bGwpIHtcbiAgICAgIGNvbnN0IHBvc2l0aW9uTWF0Y2hlc1N0YXJ0UG9zaXRpb24gPSBwb3NpdGlvbi5tYXRjaChzdGFydFBvc2l0aW9uKTtcblxuICAgICAgaWYgKHBvc2l0aW9uTWF0Y2hlc1N0YXJ0UG9zaXRpb24pIHtcbiAgICAgICAgY29uc3QgdmVsb2NpdHkgPSBWZWxvY2l0eS5mcm9tUG9zaXRpb25BbmRTdGFydFBvc2l0aW9uKHBvc2l0aW9uLCBzdGFydFBvc2l0aW9uKSxcbiAgICAgICAgICAgICAgZGlyZWN0aW9uID0gdmVsb2NpdHkuZ2V0RGlyZWN0aW9uKCksXG4gICAgICAgICAgICAgIHNwZWVkID0gdmVsb2NpdHkuZ2V0U3BlZWQoKTtcblxuICAgICAgICBsZXQgY3VzdG9tRXZlbnRUeXBlID0gbnVsbCxcbiAgICAgICAgICAgIHByb2plY3RlZFZlbG9jaXR5O1xuXG4gICAgICAgIGlmICgoTWF0aC5hYnMoZGlyZWN0aW9uKSkgPCBNQVhJTVVNX1NXSVBFX1JBTkdFKSB7XG4gICAgICAgICAgY3VzdG9tRXZlbnRUeXBlID0gU1dJUEVfUklHSFRfQ1VTVE9NX0VWRU5UX1RZUEU7XG5cbiAgICAgICAgICBwcm9qZWN0ZWRWZWxvY2l0eSA9IHNwZWVkICogTWF0aC5jb3MoZGlyZWN0aW9uKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChNYXRoLmFicyhQSV9PVkVSX1RXTyAtIGRpcmVjdGlvbikgPCBNQVhJTVVNX1NXSVBFX1JBTkdFKSB7XG4gICAgICAgICAgY3VzdG9tRXZlbnRUeXBlID0gU1dJUEVfVVBfQ1VTVE9NX0VWRU5UX1RZUEU7XG5cbiAgICAgICAgICBwcm9qZWN0ZWRWZWxvY2l0eSA9IHNwZWVkICogTWF0aC5zaW4oZGlyZWN0aW9uKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChNYXRoLmFicygtUElfT1ZFUl9UV08gLSBkaXJlY3Rpb24pIDwgTUFYSU1VTV9TV0lQRV9SQU5HRSkge1xuICAgICAgICAgIGN1c3RvbUV2ZW50VHlwZSA9IFNXSVBFX0RPV05fQ1VTVE9NX0VWRU5UX1RZUEU7XG5cbiAgICAgICAgICBwcm9qZWN0ZWRWZWxvY2l0eSA9IHNwZWVkICogTWF0aC5zaW4oZGlyZWN0aW9uKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICgoUEkgLSBNYXRoLmFicyhkaXJlY3Rpb24pKSA8IE1BWElNVU1fU1dJUEVfUkFOR0UpIHtcbiAgICAgICAgICBjdXN0b21FdmVudFR5cGUgPSBTV0lQRV9MRUZUX0NVU1RPTV9FVkVOVF9UWVBFO1xuXG4gICAgICAgICAgcHJvamVjdGVkVmVsb2NpdHkgPSBzcGVlZCAqIE1hdGguY29zKGRpcmVjdGlvbik7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoY3VzdG9tRXZlbnRUeXBlICE9PSBudWxsKSB7XG4gICAgICAgICAgdGhpcy5jYWxsQ3VzdG9tSGFuZGxlcnMoY3VzdG9tRXZlbnRUeXBlLCBldmVudCwgZWxlbWVudCwgcHJvamVjdGVkVmVsb2NpdHkpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9XG59XG5cbmZ1bmN0aW9uIGVuZEhhbmRsZXIoZXZlbnQsIGVsZW1lbnQsIHBvc2l0aW9uRnJvbUV2ZW50KSB7XG4gIGxldCBzdGFydFBvc2l0aW9uO1xuXG4gIHN0YXJ0UG9zaXRpb24gPSB0aGlzLmdldFN0YXJ0UG9zaXRpb24oKTtcblxuICBpZiAoc3RhcnRQb3NpdGlvbiAhPT0gbnVsbCkge1xuXG4gICAgY29uc3QgcG9zaXRpb24gPSBwb3NpdGlvbkZyb21FdmVudChldmVudCk7XG5cbiAgICBpZiAocG9zaXRpb24gIT09IG51bGwpIHtcbiAgICAgIGNvbnN0IHBvc2l0aW9uTWF0Y2hlc1N0YXJ0UG9zaXRpb24gPSBwb3NpdGlvbi5tYXRjaChzdGFydFBvc2l0aW9uKTtcblxuICAgICAgaWYgKHBvc2l0aW9uTWF0Y2hlc1N0YXJ0UG9zaXRpb24pIHtcbiAgICAgICAgY29uc3QgdmVsb2NpdHkgPSBWZWxvY2l0eS5mcm9tUG9zaXRpb25BbmRTdGFydFBvc2l0aW9uKHBvc2l0aW9uLCBzdGFydFBvc2l0aW9uKSxcbiAgICAgICAgICAgICAgZGlyZWN0aW9uID0gdmVsb2NpdHkuZ2V0RGlyZWN0aW9uKCksXG4gICAgICAgICAgICAgIHNwZWVkID0gdmVsb2NpdHkuZ2V0U3BlZWQoKSxcbiAgICAgICAgICAgICAgdGltZSA9IHZlbG9jaXR5LmdldFRpbWUoKTtcblxuICAgICAgICBsZXQgY3VzdG9tRXZlbnRUeXBlID0gbnVsbCxcbiAgICAgICAgICAgIHByb2plY3RlZFZlbG9jaXR5O1xuXG4gICAgICAgIGlmIChzcGVlZCA9PT0gMCkge1xuICAgICAgICAgIGlmICh0aW1lIDwgTUFYSU1VTV9UQVBfVElNRSkge1xuICAgICAgICAgICAgY3VzdG9tRXZlbnRUeXBlID0gVEFQX0NVU1RPTV9FVkVOVF9UWVBFO1xuXG4gICAgICAgICAgICBwcm9qZWN0ZWRWZWxvY2l0eSA9IHNwZWVkOyAgLy8vXG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2UgaWYgKHNwZWVkID4gTUlOSU1VTV9TV0lQRV9TUEVFRCkge1xuICAgICAgICAgIGlmICgoTWF0aC5hYnMoZGlyZWN0aW9uKSkgPCBNQVhJTVVNX1NXSVBFX1JBTkdFKSB7XG4gICAgICAgICAgICBjdXN0b21FdmVudFR5cGUgPSBTV0lQRV9SSUdIVF9DVVNUT01fRVZFTlRfVFlQRTtcblxuICAgICAgICAgICAgcHJvamVjdGVkVmVsb2NpdHkgPSBzcGVlZCAqIE1hdGguY29zKGRpcmVjdGlvbik7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgaWYgKE1hdGguYWJzKFBJX09WRVJfVFdPIC0gZGlyZWN0aW9uKSA8IE1BWElNVU1fU1dJUEVfUkFOR0UpIHtcbiAgICAgICAgICAgIGN1c3RvbUV2ZW50VHlwZSA9IFNXSVBFX1VQX0NVU1RPTV9FVkVOVF9UWVBFO1xuXG4gICAgICAgICAgICBwcm9qZWN0ZWRWZWxvY2l0eSA9IHNwZWVkICogTWF0aC5zaW4oZGlyZWN0aW9uKTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBpZiAoTWF0aC5hYnMoLVBJX09WRVJfVFdPIC0gZGlyZWN0aW9uKSA8IE1BWElNVU1fU1dJUEVfUkFOR0UpIHtcbiAgICAgICAgICAgIGN1c3RvbUV2ZW50VHlwZSA9IFNXSVBFX0RPV05fQ1VTVE9NX0VWRU5UX1RZUEU7XG5cbiAgICAgICAgICAgIHByb2plY3RlZFZlbG9jaXR5ID0gc3BlZWQgKiBNYXRoLnNpbihkaXJlY3Rpb24pO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGlmICgoUEkgLSBNYXRoLmFicyhkaXJlY3Rpb24pKSA8IE1BWElNVU1fU1dJUEVfUkFOR0UpIHtcbiAgICAgICAgICAgIGN1c3RvbUV2ZW50VHlwZSA9IFNXSVBFX0xFRlRfQ1VTVE9NX0VWRU5UX1RZUEU7XG5cbiAgICAgICAgICAgIHByb2plY3RlZFZlbG9jaXR5ID0gc3BlZWQgKiBNYXRoLmNvcyhkaXJlY3Rpb24pO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChjdXN0b21FdmVudFR5cGUgIT09IG51bGwpIHtcbiAgICAgICAgICB0aGlzLmNhbGxDdXN0b21IYW5kbGVycyhjdXN0b21FdmVudFR5cGUsIGV2ZW50LCBlbGVtZW50LCBwcm9qZWN0ZWRWZWxvY2l0eSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBzdGFydFBvc2l0aW9uID0gbnVsbDtcblxuICB0aGlzLnNldFN0YXJ0UG9zaXRpb24oc3RhcnRQb3NpdGlvbik7XG59XG5cbmNvbnN0IGN1c3RvbUV2ZW50TWl4aW5zID0ge1xuICBlbmFibGVUb3VjaCxcbiAgZGlzYWJsZVRvdWNoLFxuICBvbkN1c3RvbVRhcCxcbiAgb2ZmQ3VzdG9tVGFwLFxuICBvbkN1c3RvbVN3aXBlVXAsXG4gIG9mZkN1c3RvbVN3aXBlVXAsXG4gIG9uQ3VzdG9tU3dpcGVEb3duLFxuICBvZmZDdXN0b21Td2lwZURvd24sXG4gIG9uQ3VzdG9tU3dpcGVMZWZ0LFxuICBvZmZDdXN0b21Td2lwZUxlZnQsXG4gIG9uQ3VzdG9tU3dpcGVSaWdodCxcbiAgb2ZmQ3VzdG9tU3dpcGVSaWdodCxcbiAgZ2V0U3RhcnRQb3NpdGlvbixcbiAgc2V0U3RhcnRQb3NpdGlvbixcbiAgdG91Y2hTdGFydEhhbmRsZXIsXG4gIG1vdXNlRG93bkhhbmRsZXIsXG4gIHRvdWNoTW92ZUhhbmRsZXIsXG4gIG1vdXNlTW92ZUhhbmRsZXIsXG4gIHRvdWNoRW5kSGFuZGxlcixcbiAgbW91c2VVcEhhbmRsZXIsXG4gIHN0YXJ0SGFuZGxlcixcbiAgbW92ZUhhbmRsZXIsXG4gIGVuZEhhbmRsZXJcbn07XG5cbmV4cG9ydCBkZWZhdWx0IGN1c3RvbUV2ZW50TWl4aW5zO1xuIl0sIm5hbWVzIjpbImVuYWJsZVRvdWNoIiwic3RhcnRQb3NpdGlvbiIsInVwZGF0ZVN0YXRlIiwib25Nb3VzZURvd24iLCJtb3VzZURvd25IYW5kbGVyIiwib25Nb3VzZU1vdmUiLCJtb3VzZU1vdmVIYW5kbGVyIiwid2luZG93Iiwib25Nb3VzZVVwIiwibW91c2VVcEhhbmRsZXIiLCJvblRvdWNoU3RhcnQiLCJ0b3VjaFN0YXJ0SGFuZGxlciIsIm9uVG91Y2hNb3ZlIiwidG91Y2hNb3ZlSGFuZGxlciIsIm9uVG91Y2hFbmQiLCJ0b3VjaEVuZEhhbmRsZXIiLCJkaXNhYmxlVG91Y2giLCJvZmZNb3VzZURvd24iLCJvZmZNb3VzZU1vdmUiLCJvZmZNb3VzZVVwIiwib2ZmVG91Y2hTdGFydCIsIm9mZlRvdWNoTW92ZSIsIm9mZlRvdWNoRW5kIiwib25DdXN0b21UYXAiLCJ0YXBDdXN0b21IYW5kbGVyIiwiZWxlbWVudCIsImN1c3RvbUV2ZW50VHlwZSIsIlRBUF9DVVNUT01fRVZFTlRfVFlQRSIsImN1c3RvbUhhbmRsZXIiLCJvbkN1c3RvbUV2ZW50Iiwib2ZmQ3VzdG9tVGFwIiwib2ZmQ3VzdG9tRXZlbnQiLCJvbkN1c3RvbVN3aXBlVXAiLCJzd2lwZVVwQ3VzdG9tSGFuZGxlciIsIlNXSVBFX1VQX0NVU1RPTV9FVkVOVF9UWVBFIiwib2ZmQ3VzdG9tU3dpcGVVcCIsIm9uQ3VzdG9tU3dpcGVEb3duIiwic3dpcGVEb3duQ3VzdG9tSGFuZGxlciIsIlNXSVBFX0RPV05fQ1VTVE9NX0VWRU5UX1RZUEUiLCJvZmZDdXN0b21Td2lwZURvd24iLCJvbkN1c3RvbVN3aXBlTGVmdCIsInN3aXBlTGVmdEN1c3RvbUhhbmRsZXIiLCJTV0lQRV9MRUZUX0NVU1RPTV9FVkVOVF9UWVBFIiwib2ZmQ3VzdG9tU3dpcGVMZWZ0Iiwib25DdXN0b21Td2lwZVJpZ2h0Iiwic3dpcGVSaWdodEN1c3RvbUhhbmRsZXIiLCJTV0lQRV9SSUdIVF9DVVNUT01fRVZFTlRfVFlQRSIsIm9mZkN1c3RvbVN3aXBlUmlnaHQiLCJnZXRTdGFydFBvc2l0aW9uIiwiZ2V0U3RhdGUiLCJzZXRTdGFydFBvc2l0aW9uIiwiZXZlbnQiLCJzdGFydEhhbmRsZXIiLCJ0b3VjaEV2ZW50IiwicG9zaXRpb24iLCJQb3NpdGlvbiIsImZyb21Ub3VjaEV2ZW50IiwibW91c2VFdmVudCIsImZyb21Nb3VzZUV2ZW50IiwibW92ZUhhbmRsZXIiLCJlbmRIYW5kbGVyIiwicG9zaXRpb25Gcm9tRXZlbnQiLCJwb3NpdGlvbk1hdGNoZXNTdGFydFBvc2l0aW9uIiwibWF0Y2giLCJ2ZWxvY2l0eSIsIlZlbG9jaXR5IiwiZnJvbVBvc2l0aW9uQW5kU3RhcnRQb3NpdGlvbiIsImRpcmVjdGlvbiIsImdldERpcmVjdGlvbiIsInNwZWVkIiwiZ2V0U3BlZWQiLCJwcm9qZWN0ZWRWZWxvY2l0eSIsIk1hdGgiLCJhYnMiLCJNQVhJTVVNX1NXSVBFX1JBTkdFIiwiY29zIiwiUElfT1ZFUl9UV08iLCJzaW4iLCJQSSIsImNhbGxDdXN0b21IYW5kbGVycyIsInRpbWUiLCJnZXRUaW1lIiwiTUFYSU1VTV9UQVBfVElNRSIsIk1JTklNVU1fU1dJUEVfU1BFRUQiLCJjdXN0b21FdmVudE1peGlucyJdLCJyYW5nZU1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7IiwibWFwcGluZ3MiOiJBQUFBOzs7OytCQXFVQTs7O2VBQUE7OztvQkFuVXVCOytEQUVGOytEQUNBO3lCQUV1RTtnQ0FLOUM7Ozs7OztBQUU5QyxTQUFTQTtJQUNQLElBQU1DLGdCQUFnQjtJQUV0QixJQUFJLENBQUNDLFdBQVcsQ0FBQztRQUNmRCxlQUFBQTtJQUNGO0lBRUEsSUFBSSxDQUFDRSxXQUFXLENBQUMsSUFBSSxDQUFDQyxnQkFBZ0I7SUFDdEMsSUFBSSxDQUFDQyxXQUFXLENBQUMsSUFBSSxDQUFDQyxnQkFBZ0I7SUFFdENDLFlBQU0sQ0FBQ0MsU0FBUyxDQUFDLElBQUksQ0FBQ0MsY0FBYyxFQUFFLElBQUk7SUFFMUMsSUFBSSxDQUFDQyxZQUFZLENBQUMsSUFBSSxDQUFDQyxpQkFBaUI7SUFDeEMsSUFBSSxDQUFDQyxXQUFXLENBQUMsSUFBSSxDQUFDQyxnQkFBZ0I7SUFDdEMsSUFBSSxDQUFDQyxVQUFVLENBQUMsSUFBSSxDQUFDQyxlQUFlO0FBQ3RDO0FBRUEsU0FBU0M7SUFDUCxJQUFJLENBQUNDLFlBQVksQ0FBQyxJQUFJLENBQUNiLGdCQUFnQjtJQUN2QyxJQUFJLENBQUNjLFlBQVksQ0FBQyxJQUFJLENBQUNaLGdCQUFnQjtJQUV2Q0MsWUFBTSxDQUFDWSxVQUFVLENBQUMsSUFBSSxDQUFD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