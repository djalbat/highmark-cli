"use strict";
import changeDirectory from "./changeDirectory";
import { DEFAULT_HELP, DEFAULT_VERSION, DEFAULT_SERVER } from "./defaults";
import { HELP_COMMAND, SERVER_COMMAND, VERSION_COMMAND, PUBLISH_COMMAND, INITIALISE_COMMAND, SET_OPTIONS_COMMAND } from "./commands";
export default function prepare(command, argument, options, main) {
    var _options_help = options.help, help = _options_help === void 0 ? DEFAULT_HELP : _options_help, _options_version = options.version, version = _options_version === void 0 ? DEFAULT_VERSION : _options_version;
    if (false) {
    ///
    } else if (help) {
        command = HELP_COMMAND;
    } else if (version) {
        command = VERSION_COMMAND;
    }
    if (command === HELP_COMMAND || command === VERSION_COMMAND || command === INITIALISE_COMMAND) {
        main(command, argument, options);
        return;
    }
    var _options_server = options.server, server = _options_server === void 0 ? DEFAULT_SERVER : _options_server;
    if (server) {
        command = SERVER_COMMAND;
    }
    var directoryName = changeDirectory();
    if (directoryName !== null) {
        argument = directoryName; ///
    }
    if (argument === null) {
        if (command !== SET_OPTIONS_COMMAND) {
            argument = command; ///
            command = PUBLISH_COMMAND;
        }
    }
    if (command === null) {
        command = PUBLISH_COMMAND;
    }
    main(command, argument, options);
}

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL3NyYy9wcmVwYXJlLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xuXG5pbXBvcnQgY2hhbmdlRGlyZWN0b3J5IGZyb20gXCIuL2NoYW5nZURpcmVjdG9yeVwiO1xuXG5pbXBvcnQgeyBERUZBVUxUX0hFTFAsIERFRkFVTFRfVkVSU0lPTiwgREVGQVVMVF9TRVJWRVIgfSBmcm9tIFwiLi9kZWZhdWx0c1wiO1xuaW1wb3J0IHsgSEVMUF9DT01NQU5ELFxuICAgICAgICAgU0VSVkVSX0NPTU1BTkQsXG4gICAgICAgICBWRVJTSU9OX0NPTU1BTkQsXG4gICAgICAgICBQVUJMSVNIX0NPTU1BTkQsXG4gICAgICAgICBJTklUSUFMSVNFX0NPTU1BTkQsXG4gICAgICAgICBTRVRfT1BUSU9OU19DT01NQU5EIH0gZnJvbSBcIi4vY29tbWFuZHNcIjtcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gcHJlcGFyZShjb21tYW5kLCBhcmd1bWVudCwgb3B0aW9ucywgbWFpbikge1xuICBjb25zdCB7IGhlbHAgPSBERUZBVUxUX0hFTFAsIHZlcnNpb24gPSBERUZBVUxUX1ZFUlNJT04gfSA9IG9wdGlvbnM7XG5cbiAgaWYgKGZhbHNlKSB7XG4gICAgLy8vXG4gIH0gZWxzZSBpZiAoaGVscCkge1xuICAgIGNvbW1hbmQgPSBIRUxQX0NPTU1BTkQ7XG4gIH0gZWxzZSBpZiAodmVyc2lvbikge1xuICAgIGNvbW1hbmQgPSBWRVJTSU9OX0NPTU1BTkQ7XG4gIH1cblxuICBpZiAoKGNvbW1hbmQgPT09IEhFTFBfQ09NTUFORCkgfHxcbiAgICAgIChjb21tYW5kID09PSBWRVJTSU9OX0NPTU1BTkQpIHx8XG4gICAgICAoY29tbWFuZCA9PT0gSU5JVElBTElTRV9DT01NQU5EKSkge1xuXG4gICAgbWFpbihjb21tYW5kLCBhcmd1bWVudCwgb3B0aW9ucyk7XG5cbiAgICByZXR1cm47XG4gIH1cblxuICBjb25zdCB7IHNlcnZlciA9IERFRkFVTFRfU0VSVkVSIH0gPSBvcHRpb25zO1xuXG4gIGlmIChzZXJ2ZXIpIHtcbiAgICBjb21tYW5kID0gU0VSVkVSX0NPTU1BTkQ7XG4gIH1cblxuICBjb25zdCBkaXJlY3RvcnlOYW1lID0gY2hhbmdlRGlyZWN0b3J5KCk7XG5cbiAgaWYgKGRpcmVjdG9yeU5hbWUgIT09IG51bGwpIHtcbiAgICBhcmd1bWVudCA9IGRpcmVjdG9yeU5hbWU7IC8vL1xuICB9XG5cbiAgaWYgKGFyZ3VtZW50ID09PSBudWxsKSB7XG4gICAgaWYgKGNvbW1hbmQgIT09IFNFVF9PUFRJT05TX0NPTU1BTkQpIHtcbiAgICAgIGFyZ3VtZW50ID0gY29tbWFuZDsgLy8vXG5cbiAgICAgIGNvbW1hbmQgPSBQVUJMSVNIX0NPTU1BTkQ7XG4gICAgfVxuICB9XG5cbiAgaWYgKGNvbW1hbmQgPT09IG51bGwpIHtcbiAgICBjb21tYW5kID0gUFVCTElTSF9DT01NQU5EO1xuICB9XG5cbiAgbWFpbihjb21tYW5kLCBhcmd1bWVudCwgb3B0aW9ucyk7XG59XG4iXSwibmFtZXMiOlsiY2hhbmdlRGlyZWN0b3J5IiwiREVGQVVMVF9IRUxQIiwiREVGQVVMVF9WRVJTSU9OIiwiREVGQVVMVF9TRVJWRVIiLCJIRUxQX0NPTU1BTkQiLCJTRVJWRVJfQ09NTUFORCIsIlZFUlNJT05fQ09NTUFORCIsIlBVQkxJU0hfQ09NTUFORCIsIklOSVRJQUxJU0VfQ09NTUFORCIsIlNFVF9PUFRJT05TX0NPTU1BTkQiLCJwcmVwYXJlIiwiY29tbWFuZCIsImFyZ3VtZW50Iiwib3B0aW9ucyIsIm1haW4iLCJoZWxwIiwidmVyc2lvbiIsInNlcnZlciIsImRpcmVjdG9yeU5hbWUiXSwibWFwcGluZ3MiOiJBQUFBO0FBRUEsT0FBT0EscUJBQXFCLG9CQUFvQjtBQUVoRCxTQUFTQyxZQUFZLEVBQUVDLGVBQWUsRUFBRUMsY0FBYyxRQUFRLGFBQWE7QUFDM0UsU0FBU0MsWUFBWSxFQUNaQyxjQUFjLEVBQ2RDLGVBQWUsRUFDZkMsZUFBZSxFQUNmQyxrQkFBa0IsRUFDbEJDLG1CQUFtQixRQUFRLGFBQWE7QUFFakQsZUFBZSxTQUFTQyxRQUFRQyxPQUFPLEVBQUVDLFFBQVEsRUFBRUMsT0FBTyxFQUFFQyxJQUFJO0lBQzlELG9CQUEyREQsUUFBbkRFLE1BQUFBLGtDQUFPZCxpREFBNENZLFFBQTlCRyxTQUFBQSx3Q0FBVWQ7SUFFdkMsSUFBSSxPQUFPO0lBQ1QsR0FBRztJQUNMLE9BQU8sSUFBSWEsTUFBTTtRQUNmSixVQUFVUDtJQUNaLE9BQU8sSUFBSVksU0FBUztRQUNsQkwsVUFBVUw7SUFDWjtJQUVBLElBQUksQUFBQ0ssWUFBWVAsZ0JBQ1pPLFlBQVlMLG1CQUNaSyxZQUFZSCxvQkFBcUI7UUFFcENNLEtBQUtILFNBQVNDLFVBQVVDO1FBRXhCO0lBQ0Y7SUFFQSxzQkFBb0NBLFFBQTVCSSxRQUFBQSxzQ0FBU2Q7SUFFakIsSUFBSWMsUUFBUTtRQUNWTixVQUFVTjtJQUNaO0lBRUEsSUFBTWEsZ0JBQWdCbEI7SUFFdEIsSUFBSWtCLGtCQUFrQixNQUFNO1FBQzFCTixXQUFXTSxlQUFlLEdBQUc7SUFDL0I7SUFFQSxJQUFJTixhQUFhLE1BQU07UUFDckIsSUFBSUQsWUFBWUYscUJBQXFCO1lBQ25DRyxXQUFXRCxTQUFTLEdBQUc7WUFFdkJBLFVBQVVKO1FBQ1o7SUFDRjtJQUVBLElBQUlJLFlBQVksTUFBTTtRQUNwQkEsVUFBVUo7SUFDWjtJQUVBTyxLQUFLSCxTQUFTQyxVQUFVQztBQUMxQiJ9