"use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
Object.defineProperty(exports, "default", {
    enumerable: true,
    get: function() {
        return createIndexHTMLOperation;
    }
});
var _highmarkmarkdown = require("highmark-markdown");
var _necessary = require("necessary");
var _highmarkclient = require("highmark-client");
var _fileSystem = require("../utilities/fileSystem");
var _constants = require("../constants");
var parseContent = _necessary.templateUtilities.parseContent, concatenatePaths = _necessary.pathUtilities.concatenatePaths;
function createIndexHTMLOperation(proceed, abort, context) {
    var client = context.client, highmarkCSS = context.highmarkCSS, highmarkHTML = context.highmarkHTML, projectDirectoryName = context.projectDirectoryName, fontCSS = _highmarkmarkdown.fontStyle, args = {
        fontCSS: fontCSS,
        highmarkCSS: highmarkCSS,
        highmarkHTML: highmarkHTML
    };
    if (client) {
        Object.assign(args, {
            clientHTML: _highmarkclient.clientHTML,
            loadingCSS: _highmarkclient.loadingCSS,
            loadingHTML: _highmarkclient.loadingHTML
        });
    }
    var content;
    content = _highmarkclient.indexHTML; ///
    var regularExpression = /{(.+?)}/g, parsedContent = parseContent(content, args, regularExpression);
    content = parsedContent; ///
    var filePath = concatenatePaths(projectDirectoryName, _constants.INDEX_HTML_FILE_NAME);
    (0, _fileSystem.writeFile)(filePath, content);
    proceed();
}

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9vcGVyYXRpb24vY3JlYXRlSW5kZXhIVE1MLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xuXG5pbXBvcnQgeyBmb250U3R5bGUgfSBmcm9tIFwiaGlnaG1hcmstbWFya2Rvd25cIjtcbmltcG9ydCB7IHBhdGhVdGlsaXRpZXMsIHRlbXBsYXRlVXRpbGl0aWVzIH0gZnJvbSBcIm5lY2Vzc2FyeVwiO1xuaW1wb3J0IHsgaW5kZXhIVE1MLCBjbGllbnRIVE1MLCBsb2FkaW5nSFRNTCwgbG9hZGluZ0NTUyB9IGZyb20gXCJoaWdobWFyay1jbGllbnRcIlxuXG5pbXBvcnQgeyB3cml0ZUZpbGUgfSBmcm9tIFwiLi4vdXRpbGl0aWVzL2ZpbGVTeXN0ZW1cIjtcbmltcG9ydCB7IElOREVYX0hUTUxfRklMRV9OQU1FIH0gZnJvbSBcIi4uL2NvbnN0YW50c1wiO1xuXG5jb25zdCB7IHBhcnNlQ29udGVudCB9ID0gdGVtcGxhdGVVdGlsaXRpZXMsXG4gICAgICB7IGNvbmNhdGVuYXRlUGF0aHMgfSA9IHBhdGhVdGlsaXRpZXM7XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIGNyZWF0ZUluZGV4SFRNTE9wZXJhdGlvbihwcm9jZWVkLCBhYm9ydCwgY29udGV4dCkge1xuICBjb25zdCB7IGNsaWVudCwgaGlnaG1hcmtDU1MsIGhpZ2htYXJrSFRNTCwgcHJvamVjdERpcmVjdG9yeU5hbWUgfSA9IGNvbnRleHQsXG4gICAgICAgIGZvbnRDU1MgPSBmb250U3R5bGUsICAvLy9cbiAgICAgICAgYXJncyA9IHtcbiAgICAgICAgICBmb250Q1NTLFxuICAgICAgICAgIGhpZ2htYXJrQ1NTLFxuICAgICAgICAgIGhpZ2htYXJrSFRNTFxuICAgICAgICB9O1xuXG4gIGlmIChjbGllbnQpIHtcbiAgICBPYmplY3QuYXNzaWduKGFyZ3MsIHtcbiAgICAgIGNsaWVudEhUTUwsXG4gICAgICBsb2FkaW5nQ1NTLFxuICAgICAgbG9hZGluZ0hUTUxcbiAgICB9KTtcbiAgfVxuXG4gIGxldCBjb250ZW50O1xuXG4gIGNvbnRlbnQgPSBpbmRleEhUTUw7ICAvLy9cblxuICBjb25zdCByZWd1bGFyRXhwcmVzc2lvbiA9IC97KC4rPyl9L2csXG4gICAgICAgIHBhcnNlZENvbnRlbnQgPSBwYXJzZUNvbnRlbnQoY29udGVudCwgYXJncywgcmVndWxhckV4cHJlc3Npb24pO1xuXG4gIGNvbnRlbnQgPSBwYXJzZWRDb250ZW50OyAgLy8vXG5cbiAgY29uc3QgZmlsZVBhdGggPSBjb25jYXRlbmF0ZVBhdGhzKHByb2plY3REaXJlY3RvcnlOYW1lLCBJTkRFWF9IVE1MX0ZJTEVfTkFNRSk7XG5cbiAgd3JpdGVGaWxlKGZpbGVQYXRoLCBjb250ZW50KTtcblxuICBwcm9jZWVkKCk7XG59XG4iXSwibmFtZXMiOlsiY3JlYXRlSW5kZXhIVE1MT3BlcmF0aW9uIiwicGFyc2VDb250ZW50IiwidGVtcGxhdGVVdGlsaXRpZXMiLCJjb25jYXRlbmF0ZVBhdGhzIiwicGF0aFV0aWxpdGllcyIsInByb2NlZWQiLCJhYm9ydCIsImNvbnRleHQiLCJjbGllbnQiLCJoaWdobWFya0NTUyIsImhpZ2htYXJrSFRNTCIsInByb2plY3REaXJlY3RvcnlOYW1lIiwiZm9udENTUyIsImZvbnRTdHlsZSIsImFyZ3MiLCJPYmplY3QiLCJhc3NpZ24iLCJjbGllbnRIVE1MIiwibG9hZGluZ0NTUyIsImxvYWRpbmdIVE1MIiwiY29udGVudCIsImluZGV4SFRNTCIsInJlZ3VsYXJFeHByZXNzaW9uIiwicGFyc2VkQ29udGVudCIsImZpbGVQYXRoIiwiSU5ERVhfSFRNTF9GSUxFX05BTUUiLCJ3cml0ZUZpbGUiXSwibWFwcGluZ3MiOiJBQUFBOzs7OytCQVlBOzs7ZUFBd0JBOzs7Z0NBVkU7eUJBQ3VCOzhCQUNjOzBCQUVyQzt5QkFDVztBQUVyQyxJQUFNLEFBQUVDLGVBQWlCQyw0QkFBaUIsQ0FBbENELGNBQ0YsQUFBRUUsbUJBQXFCQyx3QkFBYSxDQUFsQ0Q7QUFFTyxTQUFTSCx5QkFBeUJLLE9BQU8sRUFBRUMsS0FBSyxFQUFFQyxPQUFPO0lBQ3RFLElBQVFDLFNBQTRERCxRQUE1REMsUUFBUUMsY0FBb0RGLFFBQXBERSxhQUFhQyxlQUF1Q0gsUUFBdkNHLGNBQWNDLHVCQUF5QkosUUFBekJJLHNCQUNyQ0MsVUFBVUMsMkJBQVMsRUFDbkJDLE9BQU87UUFDTEYsU0FBQUE7UUFDQUgsYUFBQUE7UUFDQUMsY0FBQUE7SUFDRjtJQUVOLElBQUlGLFFBQVE7UUFDVk8sT0FBT0MsTUFBTSxDQUFDRixNQUFNO1lBQ2xCRyxZQUFBQSwwQkFBVTtZQUNWQyxZQUFBQSwwQkFBVTtZQUNWQyxhQUFBQSwyQkFBVztRQUNiO0lBQ0Y7SUFFQSxJQUFJQztJQUVKQSxVQUFVQyx5QkFBUyxFQUFHLEdBQUc7SUFFekIsSUFBTUMsb0JBQW9CLFlBQ3BCQyxnQkFBZ0J0QixhQUFhbUIsU0FBU04sTUFBTVE7SUFFbERGLFVBQVVHLGVBQWdCLEdBQUc7SUFFN0IsSUFBTUMsV0FBV3JCLGlCQUFpQlEsc0JBQXNCYywrQkFBb0I7SUFFNUVDLElBQUFBLHFCQUFTLEVBQUNGLFVBQVVKO0lBRXBCZjtBQUNGIn0=