"use strict";
import { constants } from "highmark-client";
import { pathUtilities } from "necessary";
import { createLiveReloadHandler } from "lively-cli";
import { LIVE_RELOAD_PATH } from "../constants";
var concatenatePaths = pathUtilities.concatenatePaths, INDEX_HTML_FILE_NAME = constants.INDEX_HTML_FILE_NAME;
export default function watchOperation(proceed, abort, context) {
    var watch = context.watch;
    if (watch) {
        var server = context.server, quietly = context.quietly, projectDirectoryName = context.projectDirectoryName, indexHTMLFilePath = concatenatePaths(projectDirectoryName, INDEX_HTML_FILE_NAME), watchPattern = indexHTMLFilePath, liveReloadHandler = createLiveReloadHandler(watchPattern, quietly);
        server.get(LIVE_RELOAD_PATH, liveReloadHandler);
    }
    proceed();
}

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9vcGVyYXRpb24vd2F0Y2guanMiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5cbmltcG9ydCB7IGNvbnN0YW50cyB9IGZyb20gXCJoaWdobWFyay1jbGllbnRcIjtcbmltcG9ydCB7IHBhdGhVdGlsaXRpZXMgfSBmcm9tIFwibmVjZXNzYXJ5XCI7XG5pbXBvcnQgeyBjcmVhdGVMaXZlUmVsb2FkSGFuZGxlciB9IGZyb20gXCJsaXZlbHktY2xpXCI7XG5cbmltcG9ydCB7IExJVkVfUkVMT0FEX1BBVEggfSBmcm9tIFwiLi4vY29uc3RhbnRzXCI7XG5cbmNvbnN0IHsgY29uY2F0ZW5hdGVQYXRocyB9ID0gcGF0aFV0aWxpdGllcyxcbiAgICAgIHsgSU5ERVhfSFRNTF9GSUxFX05BTUUgfSA9IGNvbnN0YW50cztcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gd2F0Y2hPcGVyYXRpb24ocHJvY2VlZCwgYWJvcnQsIGNvbnRleHQpIHtcbiAgY29uc3QgeyB3YXRjaCB9ID0gY29udGV4dDtcblxuICBpZiAod2F0Y2gpIHtcbiAgICBjb25zdCB7IHNlcnZlciwgcXVpZXRseSwgcHJvamVjdERpcmVjdG9yeU5hbWUgfSA9IGNvbnRleHQsXG4gICAgICAgICAgaW5kZXhIVE1MRmlsZVBhdGggPSBjb25jYXRlbmF0ZVBhdGhzKHByb2plY3REaXJlY3RvcnlOYW1lLCBJTkRFWF9IVE1MX0ZJTEVfTkFNRSksXG4gICAgICAgICAgd2F0Y2hQYXR0ZXJuID0gaW5kZXhIVE1MRmlsZVBhdGgsIC8vL1xuICAgICAgICAgIGxpdmVSZWxvYWRIYW5kbGVyID0gY3JlYXRlTGl2ZVJlbG9hZEhhbmRsZXIod2F0Y2hQYXR0ZXJuLCBxdWlldGx5KTtcblxuICAgIHNlcnZlci5nZXQoTElWRV9SRUxPQURfUEFUSCwgbGl2ZVJlbG9hZEhhbmRsZXIpO1xuICB9XG5cbiAgcHJvY2VlZCgpO1xufVxuIl0sIm5hbWVzIjpbImNvbnN0YW50cyIsInBhdGhVdGlsaXRpZXMiLCJjcmVhdGVMaXZlUmVsb2FkSGFuZGxlciIsIkxJVkVfUkVMT0FEX1BBVEgiLCJjb25jYXRlbmF0ZVBhdGhzIiwiSU5ERVhfSFRNTF9GSUxFX05BTUUiLCJ3YXRjaE9wZXJhdGlvbiIsInByb2NlZWQiLCJhYm9ydCIsImNvbnRleHQiLCJ3YXRjaCIsInNlcnZlciIsInF1aWV0bHkiLCJwcm9qZWN0RGlyZWN0b3J5TmFtZSIsImluZGV4SFRNTEZpbGVQYXRoIiwid2F0Y2hQYXR0ZXJuIiwibGl2ZVJlbG9hZEhhbmRsZXIiLCJnZXQiXSwibWFwcGluZ3MiOiJBQUFBO0FBRUEsU0FBU0EsU0FBUyxRQUFRLGtCQUFrQjtBQUM1QyxTQUFTQyxhQUFhLFFBQVEsWUFBWTtBQUMxQyxTQUFTQyx1QkFBdUIsUUFBUSxhQUFhO0FBRXJELFNBQVNDLGdCQUFnQixRQUFRLGVBQWU7QUFFaEQsSUFBTSxBQUFFQyxtQkFBcUJILGNBQXJCRyxrQkFDRixBQUFFQyx1QkFBeUJMLFVBQXpCSztBQUVSLGVBQWUsU0FBU0MsZUFBZUMsT0FBTyxFQUFFQyxLQUFLLEVBQUVDLE9BQU87SUFDNUQsSUFBTSxBQUFFQyxRQUFVRCxRQUFWQztJQUVSLElBQUlBLE9BQU87UUFDVCxJQUFRQyxTQUEwQ0YsUUFBMUNFLFFBQVFDLFVBQWtDSCxRQUFsQ0csU0FBU0MsdUJBQXlCSixRQUF6Qkksc0JBQ25CQyxvQkFBb0JWLGlCQUFpQlMsc0JBQXNCUix1QkFDM0RVLGVBQWVELG1CQUNmRSxvQkFBb0JkLHdCQUF3QmEsY0FBY0g7UUFFaEVELE9BQU9NLEdBQUcsQ0FBQ2Qsa0JBQWtCYTtJQUMvQjtJQUVBVDtBQUNGIn0=