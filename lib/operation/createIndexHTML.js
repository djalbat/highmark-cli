"use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
Object.defineProperty(exports, "default", {
    enumerable: true,
    get: function() {
        return createIndexHTMLOperation;
    }
});
var _highmarkmarkdown = require("highmark-markdown");
var _livelycli = require("lively-cli");
var _necessary = require("necessary");
var _index = /*#__PURE__*/ _interop_require_default(require("../html/index"));
var _client = /*#__PURE__*/ _interop_require_default(require("../html/client"));
var _loading = /*#__PURE__*/ _interop_require_default(require("../css/loading"));
var _loading1 = /*#__PURE__*/ _interop_require_default(require("../html/loading"));
var _document = /*#__PURE__*/ _interop_require_default(require("../css/document"));
var _viewMode = /*#__PURE__*/ _interop_require_default(require("../html/viewMode"));
var _fileSystem = require("../utilities/fileSystem");
var _constants = require("../constants");
function _interop_require_default(obj) {
    return obj && obj.__esModule ? obj : {
        default: obj
    };
}
var parseContent = _necessary.templateUtilities.parseContent, concatenatePaths = _necessary.pathUtilities.concatenatePaths;
function createIndexHTMLOperation(proceed, abort, context) {
    var client = context.client, viewMode = context.viewMode, highmarkCSS = context.highmarkCSS, highmarkHTML = context.highmarkHTML, projectDirectoryName = context.projectDirectoryName, fontCSS = _highmarkmarkdown.fontStyle, indexHTML = (0, _index.default)(client), clientHTML = (0, _client.default)(client), loadingHTML = (0, _loading1.default)(client), loadingCSS = (0, _loading.default)(client), documentCSS = (0, _document.default)(client), viewModeHTML = (0, _viewMode.default)(client, viewMode), liveReloadHTML = _livelycli.liveReloadSnippet, args = {
        fontCSS: fontCSS,
        clientHTML: clientHTML,
        loadingCSS: loadingCSS,
        loadingHTML: loadingHTML,
        documentCSS: documentCSS,
        highmarkCSS: highmarkCSS,
        highmarkHTML: highmarkHTML,
        viewModeHTML: viewModeHTML,
        liveReloadHTML: liveReloadHTML
    };
    var content;
    content = indexHTML; ///
    var regularExpression = /{(.+?)}/g, parsedContent = parseContent(content, args, regularExpression);
    content = parsedContent; ///
    var filePath = concatenatePaths(projectDirectoryName, _constants.INDEX_HTML_FILE_NAME);
    (0, _fileSystem.writeFile)(filePath, content);
    proceed();
}

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9vcGVyYXRpb24vY3JlYXRlSW5kZXhIVE1MLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xuXG5pbXBvcnQgeyBmb250U3R5bGUgfSBmcm9tIFwiaGlnaG1hcmstbWFya2Rvd25cIjtcbmltcG9ydCB7IGxpdmVSZWxvYWRTbmlwcGV0IH0gZnJvbSBcImxpdmVseS1jbGlcIjtcbmltcG9ydCB7IHBhdGhVdGlsaXRpZXMsIHRlbXBsYXRlVXRpbGl0aWVzIH0gZnJvbSBcIm5lY2Vzc2FyeVwiO1xuXG5pbXBvcnQgY3JlYXRlSW5kZXhIVE1MIGZyb20gXCIuLi9odG1sL2luZGV4XCI7XG5pbXBvcnQgY3JlYXRlQ2xpZW50SFRNTCBmcm9tIFwiLi4vaHRtbC9jbGllbnRcIjtcbmltcG9ydCBjcmVhdGVMb2FkaW5nQ1NTIGZyb20gXCIuLi9jc3MvbG9hZGluZ1wiO1xuaW1wb3J0IGNyZWF0ZUxvYWRpbmdIVE1MIGZyb20gXCIuLi9odG1sL2xvYWRpbmdcIjtcbmltcG9ydCBjcmVhdGVEb2N1bWVudENTUyBmcm9tIFwiLi4vY3NzL2RvY3VtZW50XCI7XG5pbXBvcnQgY3JlYXRlVmlld01vZGVIVE1MIGZyb20gXCIuLi9odG1sL3ZpZXdNb2RlXCI7XG5cbmltcG9ydCB7IHdyaXRlRmlsZSB9IGZyb20gXCIuLi91dGlsaXRpZXMvZmlsZVN5c3RlbVwiO1xuaW1wb3J0IHsgSU5ERVhfSFRNTF9GSUxFX05BTUUgfSBmcm9tIFwiLi4vY29uc3RhbnRzXCI7XG5cbmNvbnN0IHsgcGFyc2VDb250ZW50IH0gPSB0ZW1wbGF0ZVV0aWxpdGllcyxcbiAgICAgIHsgY29uY2F0ZW5hdGVQYXRocyB9ID0gcGF0aFV0aWxpdGllcztcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gY3JlYXRlSW5kZXhIVE1MT3BlcmF0aW9uKHByb2NlZWQsIGFib3J0LCBjb250ZXh0KSB7XG4gIGNvbnN0IHsgY2xpZW50LCB2aWV3TW9kZSwgaGlnaG1hcmtDU1MsIGhpZ2htYXJrSFRNTCwgcHJvamVjdERpcmVjdG9yeU5hbWUgfSA9IGNvbnRleHQsXG4gICAgICAgIGZvbnRDU1MgPSBmb250U3R5bGUsICAvLy9cbiAgICAgICAgaW5kZXhIVE1MID0gY3JlYXRlSW5kZXhIVE1MKGNsaWVudCksXG4gICAgICAgIGNsaWVudEhUTUwgPSBjcmVhdGVDbGllbnRIVE1MKGNsaWVudCksXG4gICAgICAgIGxvYWRpbmdIVE1MID0gY3JlYXRlTG9hZGluZ0hUTUwoY2xpZW50KSxcbiAgICAgICAgbG9hZGluZ0NTUyA9IGNyZWF0ZUxvYWRpbmdDU1MoY2xpZW50KSxcbiAgICAgICAgZG9jdW1lbnRDU1MgPSBjcmVhdGVEb2N1bWVudENTUyhjbGllbnQpLFxuICAgICAgICB2aWV3TW9kZUhUTUwgPSBjcmVhdGVWaWV3TW9kZUhUTUwoY2xpZW50LCB2aWV3TW9kZSksXG4gICAgICAgIGxpdmVSZWxvYWRIVE1MID0gbGl2ZVJlbG9hZFNuaXBwZXQsIC8vL1xuICAgICAgICBhcmdzID0ge1xuICAgICAgICAgIGZvbnRDU1MsXG4gICAgICAgICAgY2xpZW50SFRNTCxcbiAgICAgICAgICBsb2FkaW5nQ1NTLFxuICAgICAgICAgIGxvYWRpbmdIVE1MLFxuICAgICAgICAgIGRvY3VtZW50Q1NTLFxuICAgICAgICAgIGhpZ2htYXJrQ1NTLFxuICAgICAgICAgIGhpZ2htYXJrSFRNTCxcbiAgICAgICAgICB2aWV3TW9kZUhUTUwsXG4gICAgICAgICAgbGl2ZVJlbG9hZEhUTUxcbiAgICAgICAgfTtcblxuICBsZXQgY29udGVudDtcblxuICBjb250ZW50ID0gaW5kZXhIVE1MOyAgLy8vXG5cbiAgY29uc3QgcmVndWxhckV4cHJlc3Npb24gPSAveyguKz8pfS9nLFxuICAgICAgICBwYXJzZWRDb250ZW50ID0gcGFyc2VDb250ZW50KGNvbnRlbnQsIGFyZ3MsIHJlZ3VsYXJFeHByZXNzaW9uKTtcblxuICBjb250ZW50ID0gcGFyc2VkQ29udGVudDsgIC8vL1xuXG4gIGNvbnN0IGZpbGVQYXRoID0gY29uY2F0ZW5hdGVQYXRocyhwcm9qZWN0RGlyZWN0b3J5TmFtZSwgSU5ERVhfSFRNTF9GSUxFX05BTUUpO1xuXG4gIHdyaXRlRmlsZShmaWxlUGF0aCwgY29udGVudCk7XG5cbiAgcHJvY2VlZCgpO1xufVxuIl0sIm5hbWVzIjpbImNyZWF0ZUluZGV4SFRNTE9wZXJhdGlvbiIsInBhcnNlQ29udGVudCIsInRlbXBsYXRlVXRpbGl0aWVzIiwiY29uY2F0ZW5hdGVQYXRocyIsInBhdGhVdGlsaXRpZXMiLCJwcm9jZWVkIiwiYWJvcnQiLCJjb250ZXh0IiwiY2xpZW50Iiwidmlld01vZGUiLCJoaWdobWFya0NTUyIsImhpZ2htYXJrSFRNTCIsInByb2plY3REaXJlY3RvcnlOYW1lIiwiZm9udENTUyIsImZvbnRTdHlsZSIsImluZGV4SFRNTCIsImNyZWF0ZUluZGV4SFRNTCIsImNsaWVudEhUTUwiLCJjcmVhdGVDbGllbnRIVE1MIiwibG9hZGluZ0hUTUwiLCJjcmVhdGVMb2FkaW5nSFRNTCIsImxvYWRpbmdDU1MiLCJjcmVhdGVMb2FkaW5nQ1NTIiwiZG9jdW1lbnRDU1MiLCJjcmVhdGVEb2N1bWVudENTUyIsInZpZXdNb2RlSFRNTCIsImNyZWF0ZVZpZXdNb2RlSFRNTCIsImxpdmVSZWxvYWRIVE1MIiwibGl2ZVJlbG9hZFNuaXBwZXQiLCJhcmdzIiwiY29udGVudCIsInJlZ3VsYXJFeHByZXNzaW9uIiwicGFyc2VkQ29udGVudCIsImZpbGVQYXRoIiwiSU5ERVhfSFRNTF9GSUxFX05BTUUiLCJ3cml0ZUZpbGUiXSwibWFwcGluZ3MiOiJBQUFBOzs7OytCQW1CQTs7O2VBQXdCQTs7O2dDQWpCRTt5QkFDUTt5QkFDZTs0REFFckI7NkRBQ0M7OERBQ0E7K0RBQ0M7K0RBQ0E7K0RBQ0M7MEJBRUw7eUJBQ1c7Ozs7OztBQUVyQyxJQUFNLEFBQUVDLGVBQWlCQyw0QkFBaUIsQ0FBbENELGNBQ0YsQUFBRUUsbUJBQXFCQyx3QkFBYSxDQUFsQ0Q7QUFFTyxTQUFTSCx5QkFBeUJLLE9BQU8sRUFBRUMsS0FBSyxFQUFFQyxPQUFPO0lBQ3RFLElBQVFDLFNBQXNFRCxRQUF0RUMsUUFBUUMsV0FBOERGLFFBQTlERSxVQUFVQyxjQUFvREgsUUFBcERHLGFBQWFDLGVBQXVDSixRQUF2Q0ksY0FBY0MsdUJBQXlCTCxRQUF6Qkssc0JBQy9DQyxVQUFVQywyQkFBUyxFQUNuQkMsWUFBWUMsSUFBQUEsY0FBZSxFQUFDUixTQUM1QlMsYUFBYUMsSUFBQUEsZUFBZ0IsRUFBQ1YsU0FDOUJXLGNBQWNDLElBQUFBLGlCQUFpQixFQUFDWixTQUNoQ2EsYUFBYUMsSUFBQUEsZ0JBQWdCLEVBQUNkLFNBQzlCZSxjQUFjQyxJQUFBQSxpQkFBaUIsRUFBQ2hCLFNBQ2hDaUIsZUFBZUMsSUFBQUEsaUJBQWtCLEVBQUNsQixRQUFRQyxXQUMxQ2tCLGlCQUFpQkMsNEJBQWlCLEVBQ2xDQyxPQUFPO1FBQ0xoQixTQUFBQTtRQUNBSSxZQUFBQTtRQUNBSSxZQUFBQTtRQUNBRixhQUFBQTtRQUNBSSxhQUFBQTtRQUNBYixhQUFBQTtRQUNBQyxjQUFBQTtRQUNBYyxjQUFBQTtRQUNBRSxnQkFBQUE7SUFDRjtJQUVOLElBQUlHO0lBRUpBLFVBQVVmLFdBQVksR0FBRztJQUV6QixJQUFNZ0Isb0JBQW9CLFlBQ3BCQyxnQkFBZ0IvQixhQUFhNkIsU0FBU0QsTUFBTUU7SUFFbERELFVBQVVFLGVBQWdCLEdBQUc7SUFFN0IsSUFBTUMsV0FBVzlCLGlCQUFpQlMsc0JBQXNCc0IsK0JBQW9CO0lBRTVFQyxJQUFBQSxxQkFBUyxFQUFDRixVQUFVSDtJQUVwQnpCO0FBQ0YifQ==