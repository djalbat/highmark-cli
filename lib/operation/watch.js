"use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
Object.defineProperty(exports, "default", {
    enumerable: true,
    get: function() {
        return watchOperation;
    }
});
var _necessary = require("necessary");
var _highmarkclient = require("highmark-client");
var _livelycli = require("lively-cli");
var _constants = require("../constants");
var concatenatePaths = _necessary.pathUtilities.concatenatePaths, getClientJSFileName = _highmarkclient.packageUtilities.getClientJSFileName;
function watchOperation(proceed, abort, context) {
    var watch = context.watch;
    if (watch) {
        var server = context.server, quietly = context.quietly, projectDirectoryName = context.projectDirectoryName, clientJSFileName = getClientJSFileName(), clientJSFilePath = concatenatePaths(projectDirectoryName, clientJSFileName), indexHTMLFilePath = concatenatePaths(projectDirectoryName, _constants.INDEX_HTML_FILE_NAME), watchPattern = [
            clientJSFilePath,
            indexHTMLFilePath
        ], liveReloadHandler = (0, _livelycli.createLiveReloadHandler)(watchPattern, quietly);
        server.get(_constants.LIVE_RELOAD_PATH, liveReloadHandler);
    }
    proceed();
}

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9vcGVyYXRpb24vd2F0Y2guanMiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5cbmltcG9ydCB7IHBhdGhVdGlsaXRpZXMgfSBmcm9tIFwibmVjZXNzYXJ5XCI7XG5pbXBvcnQgeyBwYWNrYWdlVXRpbGl0aWVzIH0gZnJvbSBcImhpZ2htYXJrLWNsaWVudFwiO1xuaW1wb3J0IHsgY3JlYXRlTGl2ZVJlbG9hZEhhbmRsZXIgfSBmcm9tIFwibGl2ZWx5LWNsaVwiO1xuXG5pbXBvcnQgeyBMSVZFX1JFTE9BRF9QQVRILCBJTkRFWF9IVE1MX0ZJTEVfTkFNRSB9IGZyb20gXCIuLi9jb25zdGFudHNcIjtcblxuY29uc3QgeyBjb25jYXRlbmF0ZVBhdGhzIH0gPSBwYXRoVXRpbGl0aWVzLFxuICAgICAgeyBnZXRDbGllbnRKU0ZpbGVOYW1lIH0gPSBwYWNrYWdlVXRpbGl0aWVzO1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiB3YXRjaE9wZXJhdGlvbihwcm9jZWVkLCBhYm9ydCwgY29udGV4dCkge1xuICBjb25zdCB7IHdhdGNoIH0gPSBjb250ZXh0O1xuXG4gIGlmICh3YXRjaCkge1xuICAgIGNvbnN0IHsgc2VydmVyLCBxdWlldGx5LCBwcm9qZWN0RGlyZWN0b3J5TmFtZSB9ID0gY29udGV4dCxcbiAgICAgICAgICBjbGllbnRKU0ZpbGVOYW1lID0gZ2V0Q2xpZW50SlNGaWxlTmFtZSgpLFxuICAgICAgICAgIGNsaWVudEpTRmlsZVBhdGggPSBjb25jYXRlbmF0ZVBhdGhzKHByb2plY3REaXJlY3RvcnlOYW1lLCBjbGllbnRKU0ZpbGVOYW1lKSxcbiAgICAgICAgICBpbmRleEhUTUxGaWxlUGF0aCA9IGNvbmNhdGVuYXRlUGF0aHMocHJvamVjdERpcmVjdG9yeU5hbWUsIElOREVYX0hUTUxfRklMRV9OQU1FKSxcbiAgICAgICAgICB3YXRjaFBhdHRlcm4gPSBbXG4gICAgICAgICAgICBjbGllbnRKU0ZpbGVQYXRoLFxuICAgICAgICAgICAgaW5kZXhIVE1MRmlsZVBhdGhcbiAgICAgICAgICBdLFxuICAgICAgICAgIGxpdmVSZWxvYWRIYW5kbGVyID0gY3JlYXRlTGl2ZVJlbG9hZEhhbmRsZXIod2F0Y2hQYXR0ZXJuLCBxdWlldGx5KTtcblxuICAgIHNlcnZlci5nZXQoTElWRV9SRUxPQURfUEFUSCwgbGl2ZVJlbG9hZEhhbmRsZXIpO1xuICB9XG5cbiAgcHJvY2VlZCgpO1xufVxuIl0sIm5hbWVzIjpbIndhdGNoT3BlcmF0aW9uIiwiY29uY2F0ZW5hdGVQYXRocyIsInBhdGhVdGlsaXRpZXMiLCJnZXRDbGllbnRKU0ZpbGVOYW1lIiwicGFja2FnZVV0aWxpdGllcyIsInByb2NlZWQiLCJhYm9ydCIsImNvbnRleHQiLCJ3YXRjaCIsInNlcnZlciIsInF1aWV0bHkiLCJwcm9qZWN0RGlyZWN0b3J5TmFtZSIsImNsaWVudEpTRmlsZU5hbWUiLCJjbGllbnRKU0ZpbGVQYXRoIiwiaW5kZXhIVE1MRmlsZVBhdGgiLCJJTkRFWF9IVE1MX0ZJTEVfTkFNRSIsIndhdGNoUGF0dGVybiIsImxpdmVSZWxvYWRIYW5kbGVyIiwiY3JlYXRlTGl2ZVJlbG9hZEhhbmRsZXIiLCJnZXQiLCJMSVZFX1JFTE9BRF9QQVRIIl0sIm1hcHBpbmdzIjoiQUFBQTs7OzsrQkFXQTs7O2VBQXdCQTs7O3lCQVRNOzhCQUNHO3lCQUNPO3lCQUVlO0FBRXZELElBQU0sQUFBRUMsbUJBQXFCQyx3QkFBYSxDQUFsQ0Qsa0JBQ0YsQUFBRUUsc0JBQXdCQyxnQ0FBZ0IsQ0FBeENEO0FBRU8sU0FBU0gsZUFBZUssT0FBTyxFQUFFQyxLQUFLLEVBQUVDLE9BQU87SUFDNUQsSUFBTSxBQUFFQyxRQUFVRCxRQUFWQztJQUVSLElBQUlBLE9BQU87UUFDVCxJQUFRQyxTQUEwQ0YsUUFBMUNFLFFBQVFDLFVBQWtDSCxRQUFsQ0csU0FBU0MsdUJBQXlCSixRQUF6Qkksc0JBQ25CQyxtQkFBbUJULHVCQUNuQlUsbUJBQW1CWixpQkFBaUJVLHNCQUFzQkMsbUJBQzFERSxvQkFBb0JiLGlCQUFpQlUsc0JBQXNCSSwrQkFBb0IsR0FDL0VDLGVBQWU7WUFDYkg7WUFDQUM7U0FDRCxFQUNERyxvQkFBb0JDLElBQUFBLGtDQUF1QixFQUFDRixjQUFjTjtRQUVoRUQsT0FBT1UsR0FBRyxDQUFDQywyQkFBZ0IsRUFBRUg7SUFDL0I7SUFFQVo7QUFDRiJ9