"use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
Object.defineProperty(exports, "default", {
    enumerable: true,
    get: function() {
        return watchOperation;
    }
});
var _necessary = require("necessary");
var _livelycli = require("lively-cli");
var _constants = require("../constants");
var concatenatePaths = _necessary.pathUtilities.concatenatePaths;
function watchOperation(proceed, abort, context) {
    var watch = context.watch;
    if (watch) {
        var server = context.server, quietly = context.quietly, projectDirectoryName = context.projectDirectoryName, indexHTMLFilePath = concatenatePaths(projectDirectoryName, _constants.INDEX_HTML_FILE_NAME), watchPattern = indexHTMLFilePath, liveReloadHandler = (0, _livelycli.createLiveReloadHandler)(watchPattern, quietly);
        server.get(_constants.LIVE_RELOAD_PATH, liveReloadHandler);
    }
    proceed();
}

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9vcGVyYXRpb24vd2F0Y2guanMiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5cbmltcG9ydCB7IHBhdGhVdGlsaXRpZXMgfSBmcm9tIFwibmVjZXNzYXJ5XCI7XG5pbXBvcnQgeyBjcmVhdGVMaXZlUmVsb2FkSGFuZGxlciB9IGZyb20gXCJsaXZlbHktY2xpXCI7XG5cbmltcG9ydCB7IExJVkVfUkVMT0FEX1BBVEgsIElOREVYX0hUTUxfRklMRV9OQU1FIH0gZnJvbSBcIi4uL2NvbnN0YW50c1wiO1xuXG5jb25zdCB7IGNvbmNhdGVuYXRlUGF0aHMgfSA9IHBhdGhVdGlsaXRpZXM7XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIHdhdGNoT3BlcmF0aW9uKHByb2NlZWQsIGFib3J0LCBjb250ZXh0KSB7XG4gIGNvbnN0IHsgd2F0Y2ggfSA9IGNvbnRleHQ7XG5cbiAgaWYgKHdhdGNoKSB7XG4gICAgY29uc3QgeyBzZXJ2ZXIsIHF1aWV0bHksIHByb2plY3REaXJlY3RvcnlOYW1lIH0gPSBjb250ZXh0LFxuICAgICAgICAgIGluZGV4SFRNTEZpbGVQYXRoID0gY29uY2F0ZW5hdGVQYXRocyhwcm9qZWN0RGlyZWN0b3J5TmFtZSwgSU5ERVhfSFRNTF9GSUxFX05BTUUpLFxuICAgICAgICAgIHdhdGNoUGF0dGVybiA9IGluZGV4SFRNTEZpbGVQYXRoLCAvLy9cbiAgICAgICAgICBsaXZlUmVsb2FkSGFuZGxlciA9IGNyZWF0ZUxpdmVSZWxvYWRIYW5kbGVyKHdhdGNoUGF0dGVybiwgcXVpZXRseSk7XG5cbiAgICBzZXJ2ZXIuZ2V0KExJVkVfUkVMT0FEX1BBVEgsIGxpdmVSZWxvYWRIYW5kbGVyKTtcbiAgfVxuXG4gIHByb2NlZWQoKTtcbn1cbiJdLCJuYW1lcyI6WyJ3YXRjaE9wZXJhdGlvbiIsImNvbmNhdGVuYXRlUGF0aHMiLCJwYXRoVXRpbGl0aWVzIiwicHJvY2VlZCIsImFib3J0IiwiY29udGV4dCIsIndhdGNoIiwic2VydmVyIiwicXVpZXRseSIsInByb2plY3REaXJlY3RvcnlOYW1lIiwiaW5kZXhIVE1MRmlsZVBhdGgiLCJJTkRFWF9IVE1MX0ZJTEVfTkFNRSIsIndhdGNoUGF0dGVybiIsImxpdmVSZWxvYWRIYW5kbGVyIiwiY3JlYXRlTGl2ZVJlbG9hZEhhbmRsZXIiLCJnZXQiLCJMSVZFX1JFTE9BRF9QQVRIIl0sIm1hcHBpbmdzIjoiQUFBQTs7OzsrQkFTQTs7O2VBQXdCQTs7O3lCQVBNO3lCQUNVO3lCQUVlO0FBRXZELElBQU0sQUFBRUMsbUJBQXFCQyx3QkFBYSxDQUFsQ0Q7QUFFTyxTQUFTRCxlQUFlRyxPQUFPLEVBQUVDLEtBQUssRUFBRUMsT0FBTztJQUM1RCxJQUFNLEFBQUVDLFFBQVVELFFBQVZDO0lBRVIsSUFBSUEsT0FBTztRQUNULElBQVFDLFNBQTBDRixRQUExQ0UsUUFBUUMsVUFBa0NILFFBQWxDRyxTQUFTQyx1QkFBeUJKLFFBQXpCSSxzQkFDbkJDLG9CQUFvQlQsaUJBQWlCUSxzQkFBc0JFLCtCQUFvQixHQUMvRUMsZUFBZUYsbUJBQ2ZHLG9CQUFvQkMsSUFBQUEsa0NBQXVCLEVBQUNGLGNBQWNKO1FBRWhFRCxPQUFPUSxHQUFHLENBQUNDLDJCQUFnQixFQUFFSDtJQUMvQjtJQUVBVjtBQUNGIn0=