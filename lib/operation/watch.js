"use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
Object.defineProperty(exports, "default", {
    enumerable: true,
    get: function() {
        return watchOperation;
    }
});
var _highmarkclient = require("highmark-client");
var _necessary = require("necessary");
var _livelycli = require("lively-cli");
var _constants = require("../constants");
var concatenatePaths = _necessary.pathUtilities.concatenatePaths, INDEX_HTML_FILE_NAME = _highmarkclient.constants.INDEX_HTML_FILE_NAME;
function watchOperation(proceed, abort, context) {
    var watch = context.watch;
    if (watch) {
        var server = context.server, quietly = context.quietly, projectDirectoryName = context.projectDirectoryName, indexHTMLFilePath = concatenatePaths(projectDirectoryName, INDEX_HTML_FILE_NAME), watchPattern = indexHTMLFilePath, liveReloadHandler = (0, _livelycli.createLiveReloadHandler)(watchPattern, quietly);
        server.get(_constants.LIVE_RELOAD_PATH, liveReloadHandler);
    }
    proceed();
}

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9vcGVyYXRpb24vd2F0Y2guanMiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5cbmltcG9ydCB7IGNvbnN0YW50cyB9IGZyb20gXCJoaWdobWFyay1jbGllbnRcIjtcbmltcG9ydCB7IHBhdGhVdGlsaXRpZXMgfSBmcm9tIFwibmVjZXNzYXJ5XCI7XG5pbXBvcnQgeyBjcmVhdGVMaXZlUmVsb2FkSGFuZGxlciB9IGZyb20gXCJsaXZlbHktY2xpXCI7XG5cbmltcG9ydCB7IExJVkVfUkVMT0FEX1BBVEggfSBmcm9tIFwiLi4vY29uc3RhbnRzXCI7XG5cbmNvbnN0IHsgY29uY2F0ZW5hdGVQYXRocyB9ID0gcGF0aFV0aWxpdGllcyxcbiAgICAgIHsgSU5ERVhfSFRNTF9GSUxFX05BTUUgfSA9IGNvbnN0YW50cztcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gd2F0Y2hPcGVyYXRpb24ocHJvY2VlZCwgYWJvcnQsIGNvbnRleHQpIHtcbiAgY29uc3QgeyB3YXRjaCB9ID0gY29udGV4dDtcblxuICBpZiAod2F0Y2gpIHtcbiAgICBjb25zdCB7IHNlcnZlciwgcXVpZXRseSwgcHJvamVjdERpcmVjdG9yeU5hbWUgfSA9IGNvbnRleHQsXG4gICAgICAgICAgaW5kZXhIVE1MRmlsZVBhdGggPSBjb25jYXRlbmF0ZVBhdGhzKHByb2plY3REaXJlY3RvcnlOYW1lLCBJTkRFWF9IVE1MX0ZJTEVfTkFNRSksXG4gICAgICAgICAgd2F0Y2hQYXR0ZXJuID0gaW5kZXhIVE1MRmlsZVBhdGgsIC8vL1xuICAgICAgICAgIGxpdmVSZWxvYWRIYW5kbGVyID0gY3JlYXRlTGl2ZVJlbG9hZEhhbmRsZXIod2F0Y2hQYXR0ZXJuLCBxdWlldGx5KTtcblxuICAgIHNlcnZlci5nZXQoTElWRV9SRUxPQURfUEFUSCwgbGl2ZVJlbG9hZEhhbmRsZXIpO1xuICB9XG5cbiAgcHJvY2VlZCgpO1xufVxuIl0sIm5hbWVzIjpbIndhdGNoT3BlcmF0aW9uIiwiY29uY2F0ZW5hdGVQYXRocyIsInBhdGhVdGlsaXRpZXMiLCJJTkRFWF9IVE1MX0ZJTEVfTkFNRSIsImNvbnN0YW50cyIsInByb2NlZWQiLCJhYm9ydCIsImNvbnRleHQiLCJ3YXRjaCIsInNlcnZlciIsInF1aWV0bHkiLCJwcm9qZWN0RGlyZWN0b3J5TmFtZSIsImluZGV4SFRNTEZpbGVQYXRoIiwid2F0Y2hQYXR0ZXJuIiwibGl2ZVJlbG9hZEhhbmRsZXIiLCJjcmVhdGVMaXZlUmVsb2FkSGFuZGxlciIsImdldCIsIkxJVkVfUkVMT0FEX1BBVEgiXSwibWFwcGluZ3MiOiJBQUFBOzs7OytCQVdBOzs7ZUFBd0JBOzs7OEJBVEU7eUJBQ0k7eUJBQ1U7eUJBRVA7QUFFakMsSUFBTSxBQUFFQyxtQkFBcUJDLHdCQUFhLENBQWxDRCxrQkFDRixBQUFFRSx1QkFBeUJDLHlCQUFTLENBQWxDRDtBQUVPLFNBQVNILGVBQWVLLE9BQU8sRUFBRUMsS0FBSyxFQUFFQyxPQUFPO0lBQzVELElBQU0sQUFBRUMsUUFBVUQsUUFBVkM7SUFFUixJQUFJQSxPQUFPO1FBQ1QsSUFBUUMsU0FBMENGLFFBQTFDRSxRQUFRQyxVQUFrQ0gsUUFBbENHLFNBQVNDLHVCQUF5QkosUUFBekJJLHNCQUNuQkMsb0JBQW9CWCxpQkFBaUJVLHNCQUFzQlIsdUJBQzNEVSxlQUFlRCxtQkFDZkUsb0JBQW9CQyxJQUFBQSxrQ0FBdUIsRUFBQ0YsY0FBY0g7UUFFaEVELE9BQU9PLEdBQUcsQ0FBQ0MsMkJBQWdCLEVBQUVIO0lBQy9CO0lBRUFUO0FBQ0YifQ==